{"ast":null,"code":"var _jsxFileName = \"/Users/dkjesuschua/Documents/demo_cpq/src/ImprovedApp.tsx\",\n  _s = $RefreshSig$();\nimport React, { useState, useEffect } from 'react';\nimport { customers, models, products, processings, processingRules, productDependencies } from './data/sampleData';\nimport CustomerSelector from './components/CustomerSelector';\nimport RoomManager from './components/RoomManager';\nimport ProductCatalog from './components/ProductCatalog';\nimport SimplifiedQuoteBuilder from './components/SimplifiedQuoteBuilder';\n\n// Define the 4 clear phases\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nfunction ImprovedApp() {\n  _s();\n  var _workflow$customer, _workflow$room2, _models$find, _workflow$room4, _models$find2, _models$find3;\n  const [workflow, setWorkflow] = useState({\n    currentPhase: 'customer_config',\n    customer: null,\n    room: null,\n    products: [],\n    quote: null,\n    savedStates: {}\n  });\n\n  // Phase progression with validation\n  const canProceedToNextPhase = () => {\n    switch (workflow.currentPhase) {\n      case 'customer_config':\n        return workflow.customer !== null;\n      case 'room_config':\n        return workflow.room !== null;\n      case 'product_config':\n        return workflow.products.length > 0;\n      case 'quote_finalize':\n        return workflow.quote !== null;\n      default:\n        return false;\n    }\n  };\n  const proceedToNextPhase = () => {\n    const phaseOrder = ['customer_config', 'room_config', 'product_config', 'quote_finalize'];\n    const currentIndex = phaseOrder.indexOf(workflow.currentPhase);\n    if (currentIndex < phaseOrder.length - 1 && canProceedToNextPhase()) {\n      const nextPhase = phaseOrder[currentIndex + 1];\n\n      // Auto-create quote when moving to product config\n      if (nextPhase === 'product_config' && !workflow.quote) {\n        createQuoteFromCurrentState();\n      }\n      setWorkflow(prev => ({\n        ...prev,\n        currentPhase: nextPhase,\n        savedStates: {\n          ...prev.savedStates,\n          [prev.currentPhase]: getCurrentPhaseData()\n        }\n      }));\n    }\n  };\n  const goToPreviousPhase = () => {\n    const phaseOrder = ['customer_config', 'room_config', 'product_config', 'quote_finalize'];\n    const currentIndex = phaseOrder.indexOf(workflow.currentPhase);\n    if (currentIndex > 0) {\n      const prevPhase = phaseOrder[currentIndex - 1];\n      setWorkflow(prev => ({\n        ...prev,\n        currentPhase: prevPhase\n      }));\n    }\n  };\n  const getCurrentPhaseData = () => {\n    switch (workflow.currentPhase) {\n      case 'customer_config':\n        return workflow.customer;\n      case 'room_config':\n        return workflow.room;\n      case 'product_config':\n        return workflow.products;\n      case 'quote_finalize':\n        return workflow.quote;\n      default:\n        return null;\n    }\n  };\n\n  // Save current phase state\n  const saveCurrentPhase = () => {\n    const currentData = getCurrentPhaseData();\n    setWorkflow(prev => ({\n      ...prev,\n      savedStates: {\n        ...prev.savedStates,\n        [prev.currentPhase]: currentData\n      }\n    }));\n\n    // Show save confirmation\n    const phaseNames = {\n      customer_config: 'Customer Configuration',\n      room_config: 'Room Configuration',\n      product_config: 'Product Configuration',\n      quote_finalize: 'Quote'\n    };\n    alert(`${phaseNames[workflow.currentPhase]} saved successfully!`);\n  };\n\n  // Create quote from current state\n  const createQuoteFromCurrentState = () => {\n    if (!workflow.customer || !workflow.room) return;\n    const newQuote = {\n      id: Date.now().toString(),\n      customerId: workflow.customer.id,\n      rooms: [workflow.room],\n      items: workflow.products,\n      contractDiscount: 0,\n      customerDiscount: workflow.customer.discountPercentage || 0,\n      orderDiscount: 0,\n      subtotal: 0,\n      totalDiscount: 0,\n      finalTotal: 0,\n      status: 'draft',\n      createdAt: new Date(),\n      expiresAt: new Date(Date.now() + 30 * 24 * 60 * 60 * 1000),\n      requiresApproval: false,\n      approvalThreshold: 5000\n    };\n    const updatedQuote = recalculateQuote(newQuote);\n    setWorkflow(prev => ({\n      ...prev,\n      quote: updatedQuote\n    }));\n  };\n\n  // Recalculate quote totals\n  const recalculateQuote = quote => {\n    const subtotal = quote.items.reduce((sum, item) => sum + item.totalPrice, 0);\n    const customerDiscount = subtotal * (quote.customerDiscount / 100);\n    const totalDiscount = customerDiscount + quote.orderDiscount;\n    const finalTotal = subtotal - totalDiscount;\n    return {\n      ...quote,\n      subtotal,\n      totalDiscount,\n      finalTotal,\n      requiresApproval: finalTotal > quote.approvalThreshold\n    };\n  };\n\n  // Cascading updates when stepping back\n  useEffect(() => {\n    // If customer changes, clear room and products\n    if (workflow.currentPhase === 'customer_config' && workflow.room) {\n      setWorkflow(prev => ({\n        ...prev,\n        room: null,\n        products: [],\n        quote: null\n      }));\n    }\n\n    // If room changes, clear products that don't match the new room's model\n    if (workflow.currentPhase === 'room_config' && workflow.room && workflow.products.length > 0) {\n      const roomModel = models.find(m => {\n        var _workflow$room;\n        return m.id === ((_workflow$room = workflow.room) === null || _workflow$room === void 0 ? void 0 : _workflow$room.frontModelId);\n      });\n      if (roomModel) {\n        const compatibleProducts = workflow.products.filter(item => {\n          const product = products.find(p => p.id === item.productId);\n          return (product === null || product === void 0 ? void 0 : product.modelId) === roomModel.id;\n        });\n        if (compatibleProducts.length !== workflow.products.length) {\n          setWorkflow(prev => ({\n            ...prev,\n            products: compatibleProducts,\n            quote: null // Clear quote to force recalculation\n          }));\n        }\n      }\n    }\n  }, [workflow.customer, workflow.room, workflow.currentPhase, workflow.products]);\n\n  // Phase-specific handlers\n  const handleCustomerSelect = customer => {\n    setWorkflow(prev => ({\n      ...prev,\n      customer\n    }));\n  };\n  const handleRoomCreate = room => {\n    setWorkflow(prev => ({\n      ...prev,\n      room\n    }));\n  };\n  const handleProductAdd = (productId, quantity = 1) => {\n    if (!workflow.room) return;\n    const product = products.find(p => p.id === productId);\n    if (!product) return;\n    const newItem = {\n      id: Date.now().toString(),\n      productId,\n      roomId: workflow.room.id,\n      quantity,\n      appliedProcessings: [],\n      basePrice: product.basePrice,\n      totalPrice: product.basePrice * quantity\n    };\n    setWorkflow(prev => ({\n      ...prev,\n      products: [...prev.products, newItem]\n    }));\n  };\n  const handleQuoteUpdate = updatedQuote => {\n    setWorkflow(prev => ({\n      ...prev,\n      quote: updatedQuote\n    }));\n  };\n  const resetWorkflow = () => {\n    setWorkflow({\n      currentPhase: 'customer_config',\n      customer: null,\n      room: null,\n      products: [],\n      quote: null,\n      savedStates: {}\n    });\n  };\n\n  // Get the current room's model\n  const getCurrentRoomModel = () => {\n    if (!workflow.room) {\n      console.log('DEBUG: No room in workflow');\n      return null;\n    }\n    console.log('DEBUG: Room frontModelId:', workflow.room.frontModelId);\n    const foundModel = models.find(m => m.id === workflow.room.frontModelId);\n    console.log('DEBUG: Found model:', (foundModel === null || foundModel === void 0 ? void 0 : foundModel.name) || 'NOT FOUND');\n    return foundModel || null;\n  };\n\n  // Phase titles and descriptions\n  const phaseInfo = {\n    customer_config: {\n      title: 'Phase 1: Customer Configuration',\n      description: 'Select and configure customer details'\n    },\n    room_config: {\n      title: 'Phase 2: Room Configuration',\n      description: 'Create room and select styling preferences'\n    },\n    product_config: {\n      title: 'Phase 3: Product Configuration',\n      description: 'Select products that inherit room styling'\n    },\n    quote_finalize: {\n      title: 'Phase 4: Quote Finalization',\n      description: 'Review, adjust discounts, and finalize quote'\n    }\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"min-h-screen bg-gray-50\",\n    children: [/*#__PURE__*/_jsxDEV(\"header\", {\n      className: \"bg-white shadow-sm border-b border-gray-200\",\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8\",\n        children: /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"flex justify-between items-center h-16\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"flex items-center\",\n            children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n              className: \"text-2xl font-bold text-gray-900\",\n              children: \"Kitchen CPQ\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 264,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n              className: \"ml-4 text-sm text-gray-500\",\n              children: \"Improved Workflow\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 265,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 263,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"flex items-center space-x-2\",\n            children: ['customer_config', 'room_config', 'product_config', 'quote_finalize'].map((phase, index) => {\n              const phaseNames = ['Customer', 'Room', 'Products', 'Quote'];\n              const isActive = workflow.currentPhase === phase;\n              const isCompleted = ['customer_config', 'room_config', 'product_config', 'quote_finalize'].indexOf(workflow.currentPhase) > index;\n              return /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"flex items-center\",\n                children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                  className: `w-8 h-8 rounded-full flex items-center justify-center text-sm font-medium ${isActive ? 'bg-blue-600 text-white' : isCompleted ? 'bg-green-600 text-white' : 'bg-gray-300 text-gray-600'}`,\n                  children: index + 1\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 277,\n                  columnNumber: 21\n                }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                  className: `ml-2 text-sm ${isActive ? 'text-blue-600 font-medium' : 'text-gray-500'}`,\n                  children: phaseNames[index]\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 284,\n                  columnNumber: 21\n                }, this), index < 3 && /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"w-8 h-0.5 bg-gray-300 mx-3\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 287,\n                  columnNumber: 35\n                }, this)]\n              }, phase, true, {\n                fileName: _jsxFileName,\n                lineNumber: 276,\n                columnNumber: 19\n              }, this);\n            })\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 269,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"text-right\",\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"text-sm font-medium text-gray-900\",\n              children: phaseInfo[workflow.currentPhase].title\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 295,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"text-xs text-gray-500\",\n              children: phaseInfo[workflow.currentPhase].description\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 298,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 294,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 262,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 261,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 260,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"main\", {\n      className: \"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8\",\n      children: [workflow.currentPhase === 'customer_config' && /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"max-w-4xl mx-auto\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"text-center mb-8\",\n          children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n            className: \"text-3xl font-bold text-gray-900 mb-2\",\n            children: \"Select Customer\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 313,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n            className: \"text-gray-600\",\n            children: \"Select customer to start quote process\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 314,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 312,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(CustomerSelector, {\n          customers: customers,\n          contracts: [],\n          onCustomerSelect: handleCustomerSelect\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 317,\n          columnNumber: 13\n        }, this), workflow.customer && /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"mt-6 bg-green-50 border border-green-200 rounded-lg p-4\",\n          children: /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"flex items-center justify-between\",\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n                className: \"text-lg font-medium text-green-900\",\n                children: [\"Customer Selected: \", workflow.customer.name]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 327,\n                columnNumber: 21\n              }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n                className: \"text-sm text-green-700\",\n                children: [\"Customer Discount: \", workflow.customer.discountPercentage, \"%\"]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 330,\n                columnNumber: 21\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 326,\n              columnNumber: 19\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"flex space-x-3\",\n              children: [/*#__PURE__*/_jsxDEV(\"button\", {\n                onClick: saveCurrentPhase,\n                className: \"bg-blue-600 hover:bg-blue-700 text-white px-4 py-2 rounded-md text-sm\",\n                children: \"Save Customer\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 335,\n                columnNumber: 21\n              }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n                onClick: proceedToNextPhase,\n                className: \"bg-green-600 hover:bg-green-700 text-white px-4 py-2 rounded-md text-sm\",\n                children: \"Proceed to Room Setup \\u2192\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 341,\n                columnNumber: 21\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 334,\n              columnNumber: 19\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 325,\n            columnNumber: 17\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 324,\n          columnNumber: 15\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 311,\n        columnNumber: 11\n      }, this), workflow.currentPhase === 'room_config' && /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"max-w-4xl mx-auto\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"text-center mb-8\",\n          children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n            className: \"text-3xl font-bold text-gray-900 mb-2\",\n            children: \"Configure Room\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 358,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n            className: \"text-gray-600\",\n            children: [\"Customer: \", /*#__PURE__*/_jsxDEV(\"span\", {\n              className: \"font-medium\",\n              children: (_workflow$customer = workflow.customer) === null || _workflow$customer === void 0 ? void 0 : _workflow$customer.name\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 360,\n              columnNumber: 27\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 359,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 357,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(RoomManager, {\n          models: models,\n          onCreateQuote: handleRoomCreate,\n          existingRooms: workflow.room ? [workflow.room] : [],\n          onAddRoom: handleRoomCreate\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 364,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"mt-6 flex justify-between\",\n          children: [/*#__PURE__*/_jsxDEV(\"button\", {\n            onClick: goToPreviousPhase,\n            className: \"bg-gray-600 hover:bg-gray-700 text-white px-4 py-2 rounded-md\",\n            children: \"\\u2190 Back to Customer\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 372,\n            columnNumber: 15\n          }, this), workflow.room && /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"flex space-x-3\",\n            children: [/*#__PURE__*/_jsxDEV(\"button\", {\n              onClick: saveCurrentPhase,\n              className: \"bg-blue-600 hover:bg-blue-700 text-white px-4 py-2 rounded-md\",\n              children: \"Save Room Config\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 381,\n              columnNumber: 19\n            }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n              onClick: proceedToNextPhase,\n              className: \"bg-green-600 hover:bg-green-700 text-white px-4 py-2 rounded-md\",\n              children: \"Proceed to Products \\u2192\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 387,\n              columnNumber: 19\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 380,\n            columnNumber: 17\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 371,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 356,\n        columnNumber: 11\n      }, this), workflow.currentPhase === 'product_config' && workflow.room && /*#__PURE__*/_jsxDEV(\"div\", {\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"text-center mb-8\",\n          children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n            className: \"text-3xl font-bold text-gray-900 mb-2\",\n            children: \"Configure Products\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 403,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n            className: \"text-gray-600\",\n            children: [\"Room: \", /*#__PURE__*/_jsxDEV(\"span\", {\n              className: \"font-medium\",\n              children: (_workflow$room2 = workflow.room) === null || _workflow$room2 === void 0 ? void 0 : _workflow$room2.name\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 405,\n              columnNumber: 23\n            }, this), \" | Front Model: \", /*#__PURE__*/_jsxDEV(\"span\", {\n              className: \"font-medium\",\n              children: (_models$find = models.find(m => {\n                var _workflow$room3;\n                return m.id === ((_workflow$room3 = workflow.room) === null || _workflow$room3 === void 0 ? void 0 : _workflow$room3.frontModelId);\n              })) === null || _models$find === void 0 ? void 0 : _models$find.name\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 406,\n              columnNumber: 30\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 404,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 402,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"grid grid-cols-1 lg:grid-cols-3 gap-6\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"lg:col-span-2\",\n            children: (() => {\n              const currentModel = getCurrentRoomModel();\n              console.log('DEBUG: Rendering ProductCatalog with model:', currentModel === null || currentModel === void 0 ? void 0 : currentModel.name);\n              console.log('DEBUG: Products available:', products.length);\n              console.log('DEBUG: Processings available:', processings.length);\n              return /*#__PURE__*/_jsxDEV(ProductCatalog, {\n                models: currentModel ? [currentModel] : [],\n                products: products,\n                processings: processings,\n                selectedModel: currentModel,\n                onModelSelect: () => {},\n                onAddToQuote: (product, quantity) => handleProductAdd(product.id, quantity),\n                hasQuote: true,\n                onCreateQuote: () => {}\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 419,\n                columnNumber: 21\n              }, this);\n            })()\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 411,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"space-y-6\",\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"bg-white rounded-lg shadow p-6\",\n              children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n                className: \"text-lg font-semibold text-gray-900 mb-4\",\n                children: \"Room Configuration\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 435,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"space-y-2 text-sm\",\n                children: [/*#__PURE__*/_jsxDEV(\"p\", {\n                  children: [/*#__PURE__*/_jsxDEV(\"span\", {\n                    className: \"text-gray-600\",\n                    children: \"Room:\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 437,\n                    columnNumber: 24\n                  }, this), \" \", /*#__PURE__*/_jsxDEV(\"span\", {\n                    className: \"font-medium\",\n                    children: (_workflow$room4 = workflow.room) === null || _workflow$room4 === void 0 ? void 0 : _workflow$room4.name\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 437,\n                    columnNumber: 69\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 437,\n                  columnNumber: 21\n                }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n                  children: [/*#__PURE__*/_jsxDEV(\"span\", {\n                    className: \"text-gray-600\",\n                    children: \"Front Model:\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 438,\n                    columnNumber: 24\n                  }, this), \" \", /*#__PURE__*/_jsxDEV(\"span\", {\n                    className: \"font-medium\",\n                    children: (_models$find2 = models.find(m => {\n                      var _workflow$room5;\n                      return m.id === ((_workflow$room5 = workflow.room) === null || _workflow$room5 === void 0 ? void 0 : _workflow$room5.frontModelId);\n                    })) === null || _models$find2 === void 0 ? void 0 : _models$find2.name\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 438,\n                    columnNumber: 76\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 438,\n                  columnNumber: 21\n                }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n                  children: [/*#__PURE__*/_jsxDEV(\"span\", {\n                    className: \"text-gray-600\",\n                    children: \"Style:\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 439,\n                    columnNumber: 24\n                  }, this), \" \", /*#__PURE__*/_jsxDEV(\"span\", {\n                    className: \"font-medium capitalize\",\n                    children: (_models$find3 = models.find(m => {\n                      var _workflow$room6;\n                      return m.id === ((_workflow$room6 = workflow.room) === null || _workflow$room6 === void 0 ? void 0 : _workflow$room6.frontModelId);\n                    })) === null || _models$find3 === void 0 ? void 0 : _models$find3.category\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 439,\n                    columnNumber: 70\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 439,\n                  columnNumber: 21\n                }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n                  className: \"text-xs text-blue-600 mt-2\",\n                  children: \"All products inherit this room's styling\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 440,\n                  columnNumber: 21\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 436,\n                columnNumber: 19\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 434,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"bg-white rounded-lg shadow p-6\",\n              children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n                className: \"text-lg font-semibold text-gray-900 mb-4\",\n                children: \"Selected Products\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 445,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"space-y-2 text-sm\",\n                children: [/*#__PURE__*/_jsxDEV(\"p\", {\n                  children: [/*#__PURE__*/_jsxDEV(\"span\", {\n                    className: \"text-gray-600\",\n                    children: \"Items:\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 447,\n                    columnNumber: 24\n                  }, this), \" \", /*#__PURE__*/_jsxDEV(\"span\", {\n                    className: \"font-medium\",\n                    children: workflow.products.length\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 447,\n                    columnNumber: 70\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 447,\n                  columnNumber: 21\n                }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n                  children: [/*#__PURE__*/_jsxDEV(\"span\", {\n                    className: \"text-gray-600\",\n                    children: \"Total Value:\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 448,\n                    columnNumber: 24\n                  }, this), \" \", /*#__PURE__*/_jsxDEV(\"span\", {\n                    className: \"font-medium\",\n                    children: [\"$\", workflow.products.reduce((sum, item) => sum + item.totalPrice, 0).toFixed(2)]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 448,\n                    columnNumber: 76\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 448,\n                  columnNumber: 21\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 446,\n                columnNumber: 19\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 444,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 433,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 410,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"mt-6 flex justify-between\",\n          children: [/*#__PURE__*/_jsxDEV(\"button\", {\n            onClick: goToPreviousPhase,\n            className: \"bg-gray-600 hover:bg-gray-700 text-white px-4 py-2 rounded-md\",\n            children: \"\\u2190 Back to Room Setup\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 455,\n            columnNumber: 15\n          }, this), workflow.products.length > 0 && /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"flex space-x-3\",\n            children: [/*#__PURE__*/_jsxDEV(\"button\", {\n              onClick: saveCurrentPhase,\n              className: \"bg-blue-600 hover:bg-blue-700 text-white px-4 py-2 rounded-md\",\n              children: \"Save Product Config\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 464,\n              columnNumber: 19\n            }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n              onClick: proceedToNextPhase,\n              className: \"bg-green-600 hover:bg-green-700 text-white px-4 py-2 rounded-md\",\n              children: \"Proceed to Quote \\u2192\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 470,\n              columnNumber: 19\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 463,\n            columnNumber: 17\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 454,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 401,\n        columnNumber: 11\n      }, this), workflow.currentPhase === 'quote_finalize' && workflow.quote && /*#__PURE__*/_jsxDEV(\"div\", {\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"text-center mb-8\",\n          children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n            className: \"text-3xl font-bold text-gray-900 mb-2\",\n            children: \"Finalize Quote\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 486,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n            className: \"text-gray-600\",\n            children: \"Review and configure final quote details\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 487,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 485,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(SimplifiedQuoteBuilder, {\n          quote: workflow.quote,\n          rooms: workflow.quote.rooms,\n          products: products,\n          processings: processings,\n          processingRules: processingRules,\n          productDependencies: productDependencies,\n          onQuoteUpdate: handleQuoteUpdate\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 490,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"mt-6 flex justify-between\",\n          children: [/*#__PURE__*/_jsxDEV(\"button\", {\n            onClick: goToPreviousPhase,\n            className: \"bg-gray-600 hover:bg-gray-700 text-white px-4 py-2 rounded-md\",\n            children: \"\\u2190 Back to Products\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 501,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"flex space-x-3\",\n            children: [/*#__PURE__*/_jsxDEV(\"button\", {\n              onClick: () => {\n                const quoteData = {\n                  ...workflow.quote,\n                  quoteNumber: `Q-${Date.now().toString().slice(-6)}`,\n                  savedAt: new Date()\n                };\n                console.log('Quote saved:', quoteData);\n                alert(`Quote ${quoteData.quoteNumber} saved successfully!`);\n              },\n              className: \"bg-blue-600 hover:bg-blue-700 text-white px-4 py-2 rounded-md\",\n              children: \"Save Final Quote\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 509,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n              onClick: () => {\n                try {\n                  window.print();\n                } catch (error) {\n                  console.error('Print failed:', error);\n                  alert('Print functionality is not available in this browser.');\n                }\n              },\n              className: \"bg-green-600 hover:bg-green-700 text-white px-4 py-2 rounded-md\",\n              children: \"Print Quote\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 523,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n              onClick: resetWorkflow,\n              className: \"bg-purple-600 hover:bg-purple-700 text-white px-4 py-2 rounded-md\",\n              children: \"New Quote\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 536,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 508,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 500,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 484,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 307,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 258,\n    columnNumber: 5\n  }, this);\n}\n_s(ImprovedApp, \"z5OeVN9W3Tmcy9lRfBMI8HtHksc=\");\n_c = ImprovedApp;\nexport default ImprovedApp;\nvar _c;\n$RefreshReg$(_c, \"ImprovedApp\");","map":{"version":3,"names":["React","useState","useEffect","customers","models","products","processings","processingRules","productDependencies","CustomerSelector","RoomManager","ProductCatalog","SimplifiedQuoteBuilder","jsxDEV","_jsxDEV","ImprovedApp","_s","_workflow$customer","_workflow$room2","_models$find","_workflow$room4","_models$find2","_models$find3","workflow","setWorkflow","currentPhase","customer","room","quote","savedStates","canProceedToNextPhase","length","proceedToNextPhase","phaseOrder","currentIndex","indexOf","nextPhase","createQuoteFromCurrentState","prev","getCurrentPhaseData","goToPreviousPhase","prevPhase","saveCurrentPhase","currentData","phaseNames","customer_config","room_config","product_config","quote_finalize","alert","newQuote","id","Date","now","toString","customerId","rooms","items","contractDiscount","customerDiscount","discountPercentage","orderDiscount","subtotal","totalDiscount","finalTotal","status","createdAt","expiresAt","requiresApproval","approvalThreshold","updatedQuote","recalculateQuote","reduce","sum","item","totalPrice","roomModel","find","m","_workflow$room","frontModelId","compatibleProducts","filter","product","p","productId","modelId","handleCustomerSelect","handleRoomCreate","handleProductAdd","quantity","newItem","roomId","appliedProcessings","basePrice","handleQuoteUpdate","resetWorkflow","getCurrentRoomModel","console","log","foundModel","name","phaseInfo","title","description","className","children","fileName","_jsxFileName","lineNumber","columnNumber","map","phase","index","isActive","isCompleted","contracts","onCustomerSelect","onClick","onCreateQuote","existingRooms","onAddRoom","_workflow$room3","currentModel","selectedModel","onModelSelect","onAddToQuote","hasQuote","_workflow$room5","_workflow$room6","category","toFixed","onQuoteUpdate","quoteData","quoteNumber","slice","savedAt","window","print","error","_c","$RefreshReg$"],"sources":["/Users/dkjesuschua/Documents/demo_cpq/src/ImprovedApp.tsx"],"sourcesContent":["import React, { useState, useEffect } from 'react';\nimport { Quote, Customer, Room } from './types';\nimport { customers, models, products, processings, processingRules, productDependencies } from './data/sampleData';\nimport CustomerSelector from './components/CustomerSelector';\nimport RoomManager from './components/RoomManager';\nimport ProductCatalog from './components/ProductCatalog';\nimport SimplifiedQuoteBuilder from './components/SimplifiedQuoteBuilder';\n\n// Define the 4 clear phases\ntype WorkflowPhase = 'customer_config' | 'room_config' | 'product_config' | 'quote_finalize';\n\ninterface WorkflowState {\n  currentPhase: WorkflowPhase;\n  customer: Customer | null;\n  room: Room | null;\n  products: Quote['items'];\n  quote: Quote | null;\n  savedStates: {\n    customer?: Customer;\n    room?: Room;\n    products?: Quote['items'];\n  };\n}\n\nfunction ImprovedApp() {\n  const [workflow, setWorkflow] = useState<WorkflowState>({\n    currentPhase: 'customer_config',\n    customer: null,\n    room: null,\n    products: [],\n    quote: null,\n    savedStates: {}\n  });\n\n  // Phase progression with validation\n  const canProceedToNextPhase = () => {\n    switch (workflow.currentPhase) {\n      case 'customer_config': return workflow.customer !== null;\n      case 'room_config': return workflow.room !== null;\n      case 'product_config': return workflow.products.length > 0;\n      case 'quote_finalize': return workflow.quote !== null;\n      default: return false;\n    }\n  };\n\n  const proceedToNextPhase = () => {\n    const phaseOrder: WorkflowPhase[] = ['customer_config', 'room_config', 'product_config', 'quote_finalize'];\n    const currentIndex = phaseOrder.indexOf(workflow.currentPhase);\n    \n    if (currentIndex < phaseOrder.length - 1 && canProceedToNextPhase()) {\n      const nextPhase = phaseOrder[currentIndex + 1];\n      \n      // Auto-create quote when moving to product config\n      if (nextPhase === 'product_config' && !workflow.quote) {\n        createQuoteFromCurrentState();\n      }\n      \n      setWorkflow(prev => ({ \n        ...prev, \n        currentPhase: nextPhase,\n        savedStates: {\n          ...prev.savedStates,\n          [prev.currentPhase]: getCurrentPhaseData()\n        }\n      }));\n    }\n  };\n\n  const goToPreviousPhase = () => {\n    const phaseOrder: WorkflowPhase[] = ['customer_config', 'room_config', 'product_config', 'quote_finalize'];\n    const currentIndex = phaseOrder.indexOf(workflow.currentPhase);\n    \n    if (currentIndex > 0) {\n      const prevPhase = phaseOrder[currentIndex - 1];\n      setWorkflow(prev => ({ ...prev, currentPhase: prevPhase }));\n    }\n  };\n\n  const getCurrentPhaseData = () => {\n    switch (workflow.currentPhase) {\n      case 'customer_config': return workflow.customer;\n      case 'room_config': return workflow.room;\n      case 'product_config': return workflow.products;\n      case 'quote_finalize': return workflow.quote;\n      default: return null;\n    }\n  };\n\n  // Save current phase state\n  const saveCurrentPhase = () => {\n    const currentData = getCurrentPhaseData();\n    setWorkflow(prev => ({\n      ...prev,\n      savedStates: {\n        ...prev.savedStates,\n        [prev.currentPhase]: currentData\n      }\n    }));\n    \n    // Show save confirmation\n    const phaseNames = {\n      customer_config: 'Customer Configuration',\n      room_config: 'Room Configuration', \n      product_config: 'Product Configuration',\n      quote_finalize: 'Quote'\n    };\n    alert(`${phaseNames[workflow.currentPhase]} saved successfully!`);\n  };\n\n  // Create quote from current state\n  const createQuoteFromCurrentState = () => {\n    if (!workflow.customer || !workflow.room) return;\n\n    const newQuote: Quote = {\n      id: Date.now().toString(),\n      customerId: workflow.customer.id,\n      rooms: [workflow.room],\n      items: workflow.products,\n      contractDiscount: 0,\n      customerDiscount: workflow.customer.discountPercentage || 0,\n      orderDiscount: 0,\n      subtotal: 0,\n      totalDiscount: 0,\n      finalTotal: 0,\n      status: 'draft',\n      createdAt: new Date(),\n      expiresAt: new Date(Date.now() + 30 * 24 * 60 * 60 * 1000),\n      requiresApproval: false,\n      approvalThreshold: 5000\n    };\n\n    const updatedQuote = recalculateQuote(newQuote);\n    setWorkflow(prev => ({ ...prev, quote: updatedQuote }));\n  };\n\n  // Recalculate quote totals\n  const recalculateQuote = (quote: Quote): Quote => {\n    const subtotal = quote.items.reduce((sum, item) => sum + item.totalPrice, 0);\n    const customerDiscount = subtotal * (quote.customerDiscount / 100);\n    const totalDiscount = customerDiscount + quote.orderDiscount;\n    const finalTotal = subtotal - totalDiscount;\n\n    return {\n      ...quote,\n      subtotal,\n      totalDiscount,\n      finalTotal,\n      requiresApproval: finalTotal > quote.approvalThreshold\n    };\n  };\n\n  // Cascading updates when stepping back\n  useEffect(() => {\n    // If customer changes, clear room and products\n    if (workflow.currentPhase === 'customer_config' && workflow.room) {\n      setWorkflow(prev => ({ ...prev, room: null, products: [], quote: null }));\n    }\n    \n    // If room changes, clear products that don't match the new room's model\n    if (workflow.currentPhase === 'room_config' && workflow.room && workflow.products.length > 0) {\n      const roomModel = models.find(m => m.id === workflow.room?.frontModelId);\n      if (roomModel) {\n        const compatibleProducts = workflow.products.filter(item => {\n          const product = products.find(p => p.id === item.productId);\n          return product?.modelId === roomModel.id;\n        });\n        \n        if (compatibleProducts.length !== workflow.products.length) {\n          setWorkflow(prev => ({ \n            ...prev, \n            products: compatibleProducts,\n            quote: null // Clear quote to force recalculation\n          }));\n        }\n      }\n    }\n  }, [workflow.customer, workflow.room, workflow.currentPhase, workflow.products]);\n\n  // Phase-specific handlers\n  const handleCustomerSelect = (customer: Customer) => {\n    setWorkflow(prev => ({ ...prev, customer }));\n  };\n\n  const handleRoomCreate = (room: Room) => {\n    setWorkflow(prev => ({ ...prev, room }));\n  };\n\n  const handleProductAdd = (productId: string, quantity: number = 1) => {\n    if (!workflow.room) return;\n\n    const product = products.find(p => p.id === productId);\n    if (!product) return;\n\n    const newItem = {\n      id: Date.now().toString(),\n      productId,\n      roomId: workflow.room.id,\n      quantity,\n      appliedProcessings: [],\n      basePrice: product.basePrice,\n      totalPrice: product.basePrice * quantity\n    };\n\n    setWorkflow(prev => ({ \n      ...prev, \n      products: [...prev.products, newItem]\n    }));\n  };\n\n  const handleQuoteUpdate = (updatedQuote: Quote) => {\n    setWorkflow(prev => ({ ...prev, quote: updatedQuote }));\n  };\n\n  const resetWorkflow = () => {\n    setWorkflow({\n      currentPhase: 'customer_config',\n      customer: null,\n      room: null,\n      products: [],\n      quote: null,\n      savedStates: {}\n    });\n  };\n\n  // Get the current room's model\n  const getCurrentRoomModel = () => {\n    if (!workflow.room) {\n      console.log('DEBUG: No room in workflow');\n      return null;\n    }\n    console.log('DEBUG: Room frontModelId:', workflow.room.frontModelId);\n    const foundModel = models.find(m => m.id === workflow.room!.frontModelId);\n    console.log('DEBUG: Found model:', foundModel?.name || 'NOT FOUND');\n    return foundModel || null;\n  };\n\n  // Phase titles and descriptions\n  const phaseInfo = {\n    customer_config: {\n      title: 'Phase 1: Customer Configuration',\n      description: 'Select and configure customer details'\n    },\n    room_config: {\n      title: 'Phase 2: Room Configuration', \n      description: 'Create room and select styling preferences'\n    },\n    product_config: {\n      title: 'Phase 3: Product Configuration',\n      description: 'Select products that inherit room styling'\n    },\n    quote_finalize: {\n      title: 'Phase 4: Quote Finalization',\n      description: 'Review, adjust discounts, and finalize quote'\n    }\n  };\n\n  return (\n    <div className=\"min-h-screen bg-gray-50\">\n      {/* Header with Phase Progression */}\n      <header className=\"bg-white shadow-sm border-b border-gray-200\">\n        <div className=\"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8\">\n          <div className=\"flex justify-between items-center h-16\">\n            <div className=\"flex items-center\">\n              <h1 className=\"text-2xl font-bold text-gray-900\">Kitchen CPQ</h1>\n              <span className=\"ml-4 text-sm text-gray-500\">Improved Workflow</span>\n            </div>\n            \n            {/* Phase Progress Indicator */}\n            <div className=\"flex items-center space-x-2\">\n              {(['customer_config', 'room_config', 'product_config', 'quote_finalize'] as WorkflowPhase[]).map((phase, index) => {\n                const phaseNames = ['Customer', 'Room', 'Products', 'Quote'];\n                const isActive = workflow.currentPhase === phase;\n                const isCompleted = (['customer_config', 'room_config', 'product_config', 'quote_finalize'] as WorkflowPhase[]).indexOf(workflow.currentPhase) > index;\n                \n                return (\n                  <div key={phase} className=\"flex items-center\">\n                    <div className={`w-8 h-8 rounded-full flex items-center justify-center text-sm font-medium ${\n                      isActive ? 'bg-blue-600 text-white' :\n                      isCompleted ? 'bg-green-600 text-white' :\n                      'bg-gray-300 text-gray-600'\n                    }`}>\n                      {index + 1}\n                    </div>\n                    <span className={`ml-2 text-sm ${isActive ? 'text-blue-600 font-medium' : 'text-gray-500'}`}>\n                      {phaseNames[index]}\n                    </span>\n                    {index < 3 && <div className=\"w-8 h-0.5 bg-gray-300 mx-3\" />}\n                  </div>\n                );\n              })}\n            </div>\n\n            {/* Current Phase Info */}\n            <div className=\"text-right\">\n              <div className=\"text-sm font-medium text-gray-900\">\n                {phaseInfo[workflow.currentPhase].title}\n              </div>\n              <div className=\"text-xs text-gray-500\">\n                {phaseInfo[workflow.currentPhase].description}\n              </div>\n            </div>\n          </div>\n        </div>\n      </header>\n\n      {/* Main Content */}\n      <main className=\"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8\">\n        \n        {/* Phase 1: Customer Configuration */}\n        {workflow.currentPhase === 'customer_config' && (\n          <div className=\"max-w-4xl mx-auto\">\n            <div className=\"text-center mb-8\">\n              <h2 className=\"text-3xl font-bold text-gray-900 mb-2\">Select Customer</h2>\n              <p className=\"text-gray-600\">Select customer to start quote process</p>\n            </div>\n            \n            <CustomerSelector\n              customers={customers}\n              contracts={[]}\n              onCustomerSelect={handleCustomerSelect}\n            />\n\n            {workflow.customer && (\n              <div className=\"mt-6 bg-green-50 border border-green-200 rounded-lg p-4\">\n                <div className=\"flex items-center justify-between\">\n                  <div>\n                    <h3 className=\"text-lg font-medium text-green-900\">\n                      Customer Selected: {workflow.customer.name}\n                    </h3>\n                    <p className=\"text-sm text-green-700\">\n                      Customer Discount: {workflow.customer.discountPercentage}%\n                    </p>\n                  </div>\n                  <div className=\"flex space-x-3\">\n                    <button\n                      onClick={saveCurrentPhase}\n                      className=\"bg-blue-600 hover:bg-blue-700 text-white px-4 py-2 rounded-md text-sm\"\n                    >\n                      Save Customer\n                    </button>\n                    <button\n                      onClick={proceedToNextPhase}\n                      className=\"bg-green-600 hover:bg-green-700 text-white px-4 py-2 rounded-md text-sm\"\n                    >\n                      Proceed to Room Setup →\n                    </button>\n                  </div>\n                </div>\n              </div>\n            )}\n          </div>\n        )}\n\n        {/* Phase 2: Room Configuration */}\n        {workflow.currentPhase === 'room_config' && (\n          <div className=\"max-w-4xl mx-auto\">\n            <div className=\"text-center mb-8\">\n              <h2 className=\"text-3xl font-bold text-gray-900 mb-2\">Configure Room</h2>\n              <p className=\"text-gray-600\">\n                Customer: <span className=\"font-medium\">{workflow.customer?.name}</span>\n              </p>\n            </div>\n\n            <RoomManager\n              models={models}\n              onCreateQuote={handleRoomCreate}\n              existingRooms={workflow.room ? [workflow.room] : []}\n              onAddRoom={handleRoomCreate}\n            />\n\n            <div className=\"mt-6 flex justify-between\">\n              <button\n                onClick={goToPreviousPhase}\n                className=\"bg-gray-600 hover:bg-gray-700 text-white px-4 py-2 rounded-md\"\n              >\n                ← Back to Customer\n              </button>\n\n              {workflow.room && (\n                <div className=\"flex space-x-3\">\n                  <button\n                    onClick={saveCurrentPhase}\n                    className=\"bg-blue-600 hover:bg-blue-700 text-white px-4 py-2 rounded-md\"\n                  >\n                    Save Room Config\n                  </button>\n                  <button\n                    onClick={proceedToNextPhase}\n                    className=\"bg-green-600 hover:bg-green-700 text-white px-4 py-2 rounded-md\"\n                  >\n                    Proceed to Products →\n                  </button>\n                </div>\n              )}\n            </div>\n          </div>\n        )}\n\n        {/* Phase 3: Product Configuration */}\n        {workflow.currentPhase === 'product_config' && workflow.room && (\n          <div>\n            <div className=\"text-center mb-8\">\n              <h2 className=\"text-3xl font-bold text-gray-900 mb-2\">Configure Products</h2>\n              <p className=\"text-gray-600\">\n                Room: <span className=\"font-medium\">{workflow.room?.name}</span> | \n                Front Model: <span className=\"font-medium\">{models.find(m => m.id === workflow.room?.frontModelId)?.name}</span>\n              </p>\n            </div>\n\n            <div className=\"grid grid-cols-1 lg:grid-cols-3 gap-6\">\n              <div className=\"lg:col-span-2\">\n                {(() => {\n                  const currentModel = getCurrentRoomModel();\n                  console.log('DEBUG: Rendering ProductCatalog with model:', currentModel?.name);\n                  console.log('DEBUG: Products available:', products.length);\n                  console.log('DEBUG: Processings available:', processings.length);\n                  \n                  return (\n                    <ProductCatalog\n                      models={currentModel ? [currentModel] : []}\n                      products={products}\n                      processings={processings}\n                      selectedModel={currentModel}\n                      onModelSelect={() => {}}\n                      onAddToQuote={(product, quantity) => handleProductAdd(product.id, quantity)}\n                      hasQuote={true}\n                      onCreateQuote={() => {}}\n                    />\n                  );\n                })()}\n              </div>\n              \n              <div className=\"space-y-6\">\n                <div className=\"bg-white rounded-lg shadow p-6\">\n                  <h3 className=\"text-lg font-semibold text-gray-900 mb-4\">Room Configuration</h3>\n                  <div className=\"space-y-2 text-sm\">\n                    <p><span className=\"text-gray-600\">Room:</span> <span className=\"font-medium\">{workflow.room?.name}</span></p>\n                    <p><span className=\"text-gray-600\">Front Model:</span> <span className=\"font-medium\">{models.find(m => m.id === workflow.room?.frontModelId)?.name}</span></p>\n                    <p><span className=\"text-gray-600\">Style:</span> <span className=\"font-medium capitalize\">{models.find(m => m.id === workflow.room?.frontModelId)?.category}</span></p>\n                    <p className=\"text-xs text-blue-600 mt-2\">All products inherit this room's styling</p>\n                  </div>\n                </div>\n\n                <div className=\"bg-white rounded-lg shadow p-6\">\n                  <h3 className=\"text-lg font-semibold text-gray-900 mb-4\">Selected Products</h3>\n                  <div className=\"space-y-2 text-sm\">\n                    <p><span className=\"text-gray-600\">Items:</span> <span className=\"font-medium\">{workflow.products.length}</span></p>\n                    <p><span className=\"text-gray-600\">Total Value:</span> <span className=\"font-medium\">${workflow.products.reduce((sum, item) => sum + item.totalPrice, 0).toFixed(2)}</span></p>\n                  </div>\n                </div>\n              </div>\n            </div>\n\n            <div className=\"mt-6 flex justify-between\">\n              <button\n                onClick={goToPreviousPhase}\n                className=\"bg-gray-600 hover:bg-gray-700 text-white px-4 py-2 rounded-md\"\n              >\n                ← Back to Room Setup\n              </button>\n\n              {workflow.products.length > 0 && (\n                <div className=\"flex space-x-3\">\n                  <button\n                    onClick={saveCurrentPhase}\n                    className=\"bg-blue-600 hover:bg-blue-700 text-white px-4 py-2 rounded-md\"\n                  >\n                    Save Product Config\n                  </button>\n                  <button\n                    onClick={proceedToNextPhase}\n                    className=\"bg-green-600 hover:bg-green-700 text-white px-4 py-2 rounded-md\"\n                  >\n                    Proceed to Quote →\n                  </button>\n                </div>\n              )}\n            </div>\n          </div>\n        )}\n\n        {/* Phase 4: Quote Finalization */}\n        {workflow.currentPhase === 'quote_finalize' && workflow.quote && (\n          <div>\n            <div className=\"text-center mb-8\">\n              <h2 className=\"text-3xl font-bold text-gray-900 mb-2\">Finalize Quote</h2>\n              <p className=\"text-gray-600\">Review and configure final quote details</p>\n            </div>\n\n            <SimplifiedQuoteBuilder\n              quote={workflow.quote}\n              rooms={workflow.quote.rooms}\n              products={products}\n              processings={processings}\n              processingRules={processingRules}\n              productDependencies={productDependencies}\n              onQuoteUpdate={handleQuoteUpdate}\n            />\n\n            <div className=\"mt-6 flex justify-between\">\n              <button\n                onClick={goToPreviousPhase}\n                className=\"bg-gray-600 hover:bg-gray-700 text-white px-4 py-2 rounded-md\"\n              >\n                ← Back to Products\n              </button>\n\n              <div className=\"flex space-x-3\">\n                <button\n                  onClick={() => {\n                    const quoteData = {\n                      ...workflow.quote,\n                      quoteNumber: `Q-${Date.now().toString().slice(-6)}`,\n                      savedAt: new Date()\n                    };\n                    console.log('Quote saved:', quoteData);\n                    alert(`Quote ${quoteData.quoteNumber} saved successfully!`);\n                  }}\n                  className=\"bg-blue-600 hover:bg-blue-700 text-white px-4 py-2 rounded-md\"\n                >\n                  Save Final Quote\n                </button>\n                <button\n                  onClick={() => {\n                    try {\n                      window.print();\n                    } catch (error) {\n                      console.error('Print failed:', error);\n                      alert('Print functionality is not available in this browser.');\n                    }\n                  }}\n                  className=\"bg-green-600 hover:bg-green-700 text-white px-4 py-2 rounded-md\"\n                >\n                  Print Quote\n                </button>\n                <button\n                  onClick={resetWorkflow}\n                  className=\"bg-purple-600 hover:bg-purple-700 text-white px-4 py-2 rounded-md\"\n                >\n                  New Quote\n                </button>\n              </div>\n            </div>\n          </div>\n        )}\n      </main>\n    </div>\n  );\n}\n\nexport default ImprovedApp;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}