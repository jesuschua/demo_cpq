{"ast":null,"code":"var _jsxFileName = \"/Users/dkjesuschua/Documents/demo_cpq/src/components/SimplifiedQuoteBuilder.tsx\",\n  _s = $RefreshSig$();\nimport React, { useState } from 'react';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst SimplifiedQuoteBuilder = ({\n  quote,\n  rooms,\n  products,\n  processings,\n  processingRules,\n  productDependencies,\n  onQuoteUpdate\n}) => {\n  _s();\n  var _getRoom;\n  console.log('SimplifiedQuoteBuilder: quote.items count:', quote.items.length);\n  console.log('SimplifiedQuoteBuilder: products count:', products.length);\n  console.log('SimplifiedQuoteBuilder: processings count:', processings.length);\n  const [selectedRoomFilter, setSelectedRoomFilter] = useState('all');\n  const [orderDiscount, setOrderDiscount] = useState(quote.orderDiscount);\n  const getProduct = productId => products.find(p => p.id === productId);\n  const getProcessing = processingId => processings.find(p => p.id === processingId);\n  const getRoom = roomId => rooms.find(r => r.id === roomId);\n  const filteredItems = selectedRoomFilter === 'all' ? quote.items : quote.items.filter(item => item.roomId === selectedRoomFilter);\n  const updateQuantity = (itemId, newQuantity) => {\n    const updatedItems = quote.items.map(item => {\n      if (item.id === itemId) {\n        const updatedItem = {\n          ...item,\n          quantity: newQuantity\n        };\n        updatedItem.totalPrice = updatedItem.basePrice * newQuantity + updatedItem.appliedProcessings.reduce((sum, ap) => sum + ap.calculatedPrice, 0);\n        return updatedItem;\n      }\n      return item;\n    });\n    recalculateQuote({\n      ...quote,\n      items: updatedItems\n    });\n  };\n  const removeItem = itemId => {\n    const updatedItems = quote.items.filter(item => item.id !== itemId);\n    recalculateQuote({\n      ...quote,\n      items: updatedItems\n    });\n  };\n  const getAvailableProcessings = (productId, currentProcessings) => {\n    const product = getProduct(productId);\n    if (!product) return [];\n\n    // Get processings applicable to this product category\n    let available = processings.filter(proc => proc.applicableProductCategories.includes(product.category));\n\n    // Apply mutual exclusion rules\n    const mutualExclusionRules = processingRules.filter(rule => rule.type === 'mutual_exclusion');\n    mutualExclusionRules.forEach(rule => {\n      const hasConflicting = currentProcessings.some(procId => {\n        var _rule$conditions$proc;\n        return (_rule$conditions$proc = rule.conditions.processingIds) === null || _rule$conditions$proc === void 0 ? void 0 : _rule$conditions$proc.includes(procId);\n      });\n      if (hasConflicting && rule.actions.excludeProcessings) {\n        available = available.filter(proc => {\n          var _rule$actions$exclude;\n          return !((_rule$actions$exclude = rule.actions.excludeProcessings) !== null && _rule$actions$exclude !== void 0 && _rule$actions$exclude.includes(proc.id));\n        });\n      }\n    });\n\n    // Remove already applied processings\n    available = available.filter(proc => !currentProcessings.includes(proc.id));\n    return available;\n  };\n  const addProcessingToItem = (itemId, processingId) => {\n    const item = quote.items.find(i => i.id === itemId);\n    const processing = getProcessing(processingId);\n    const product = item ? getProduct(item.productId) : null;\n    if (!item || !processing || !product) return;\n\n    // Calculate processing price\n    let calculatedPrice = 0;\n    if (processing.pricingType === 'per_unit') {\n      calculatedPrice = processing.price * item.quantity;\n    } else if (processing.pricingType === 'percentage') {\n      calculatedPrice = item.basePrice * item.quantity * processing.price;\n    } else if (processing.pricingType === 'per_dimension' && product.dimensions) {\n      calculatedPrice = (product.dimensions.width || 0) * processing.price;\n    }\n    const updatedItems = quote.items.map(i => {\n      if (i.id === itemId) {\n        const updatedItem = {\n          ...i,\n          appliedProcessings: [...i.appliedProcessings, {\n            processingId,\n            calculatedPrice\n          }]\n        };\n        updatedItem.totalPrice = updatedItem.basePrice * updatedItem.quantity + updatedItem.appliedProcessings.reduce((sum, ap) => sum + ap.calculatedPrice, 0);\n        return updatedItem;\n      }\n      return i;\n    });\n    recalculateQuote({\n      ...quote,\n      items: updatedItems\n    });\n  };\n  const removeProcessingFromItem = (itemId, processingId) => {\n    const updatedItems = quote.items.map(item => {\n      if (item.id === itemId) {\n        const updatedItem = {\n          ...item,\n          appliedProcessings: item.appliedProcessings.filter(ap => ap.processingId !== processingId)\n        };\n        updatedItem.totalPrice = updatedItem.basePrice * updatedItem.quantity + updatedItem.appliedProcessings.reduce((sum, ap) => sum + ap.calculatedPrice, 0);\n        return updatedItem;\n      }\n      return item;\n    });\n    recalculateQuote({\n      ...quote,\n      items: updatedItems\n    });\n  };\n  const applyOrderDiscount = () => {\n    const updatedQuote = {\n      ...quote,\n      orderDiscount\n    };\n    recalculateQuote(updatedQuote);\n  };\n  const recalculateQuote = updatedQuote => {\n    const subtotal = updatedQuote.items.reduce((sum, item) => sum + item.totalPrice, 0);\n    const customerDiscount = subtotal * (updatedQuote.customerDiscount / 100);\n    const totalDiscount = customerDiscount + updatedQuote.orderDiscount;\n    const finalTotal = subtotal - totalDiscount;\n    const finalQuote = {\n      ...updatedQuote,\n      subtotal,\n      totalDiscount,\n      finalTotal,\n      requiresApproval: finalTotal > updatedQuote.approvalThreshold\n    };\n    onQuoteUpdate(finalQuote);\n  };\n\n  // Group items by room for better organization\n  const itemsByRoom = quote.items.reduce((acc, item) => {\n    const roomId = item.roomId;\n    if (!acc[roomId]) acc[roomId] = [];\n    acc[roomId].push(item);\n    return acc;\n  }, {});\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"space-y-6\",\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"bg-white rounded-lg shadow p-4\",\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"flex items-center justify-between\",\n        children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n          className: \"text-lg font-medium text-gray-900\",\n          children: \"Filter by Room\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 177,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"select\", {\n          value: selectedRoomFilter,\n          onChange: e => setSelectedRoomFilter(e.target.value),\n          className: \"px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500\",\n          children: [/*#__PURE__*/_jsxDEV(\"option\", {\n            value: \"all\",\n            children: [\"All Rooms (\", quote.items.length, \" items)\"]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 183,\n            columnNumber: 13\n          }, this), rooms.map(room => {\n            const roomItems = quote.items.filter(item => item.roomId === room.id);\n            return /*#__PURE__*/_jsxDEV(\"option\", {\n              value: room.id,\n              children: [room.name, \" (\", roomItems.length, \" items)\"]\n            }, room.id, true, {\n              fileName: _jsxFileName,\n              lineNumber: 187,\n              columnNumber: 17\n            }, this);\n          })]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 178,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 176,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 175,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"space-y-6\",\n      children: selectedRoomFilter === 'all' ?\n      // Show all rooms\n      rooms.map(room => {\n        const roomItems = itemsByRoom[room.id] || [];\n        if (roomItems.length === 0) return null;\n        return /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"bg-white rounded-lg shadow\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"p-4 border-b border-gray-200 bg-blue-50\",\n            children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n              className: \"text-lg font-medium text-gray-900\",\n              children: room.name\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 207,\n              columnNumber: 19\n            }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n              className: \"text-sm text-gray-600\",\n              children: [roomItems.length, \" items\"]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 208,\n              columnNumber: 19\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 206,\n            columnNumber: 17\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"divide-y divide-gray-200\",\n            children: roomItems.map(item => /*#__PURE__*/_jsxDEV(ItemRow, {\n              item: item,\n              product: getProduct(item.productId),\n              getProcessing: getProcessing,\n              getAvailableProcessings: getAvailableProcessings,\n              updateQuantity: updateQuantity,\n              removeItem: removeItem,\n              addProcessingToItem: addProcessingToItem,\n              removeProcessingFromItem: removeProcessingFromItem\n            }, item.id, false, {\n              fileName: _jsxFileName,\n              lineNumber: 212,\n              columnNumber: 21\n            }, this))\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 210,\n            columnNumber: 17\n          }, this)]\n        }, room.id, true, {\n          fileName: _jsxFileName,\n          lineNumber: 205,\n          columnNumber: 15\n        }, this);\n      }) :\n      /*#__PURE__*/\n      // Show single room\n      _jsxDEV(\"div\", {\n        className: \"bg-white rounded-lg shadow\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"p-4 border-b border-gray-200\",\n          children: /*#__PURE__*/_jsxDEV(\"h3\", {\n            className: \"text-lg font-medium text-gray-900\",\n            children: [((_getRoom = getRoom(selectedRoomFilter)) === null || _getRoom === void 0 ? void 0 : _getRoom.name) || 'Room', \" Items\"]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 232,\n            columnNumber: 15\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 231,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"divide-y divide-gray-200\",\n          children: filteredItems.map(item => /*#__PURE__*/_jsxDEV(ItemRow, {\n            item: item,\n            product: getProduct(item.productId),\n            getProcessing: getProcessing,\n            getAvailableProcessings: getAvailableProcessings,\n            updateQuantity: updateQuantity,\n            removeItem: removeItem,\n            addProcessingToItem: addProcessingToItem,\n            removeProcessingFromItem: removeProcessingFromItem\n          }, item.id, false, {\n            fileName: _jsxFileName,\n            lineNumber: 238,\n            columnNumber: 17\n          }, this))\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 236,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 230,\n        columnNumber: 11\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 197,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"bg-white rounded-lg shadow p-6\",\n      children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n        className: \"text-lg font-medium text-gray-900 mb-4\",\n        children: \"Quote Summary\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 257,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"space-y-3\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"flex justify-between\",\n          children: [/*#__PURE__*/_jsxDEV(\"span\", {\n            className: \"text-gray-600\",\n            children: \"Subtotal:\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 261,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n            className: \"font-medium\",\n            children: [\"$\", quote.subtotal.toFixed(2)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 262,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 260,\n          columnNumber: 11\n        }, this), quote.customerDiscount > 0 && /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"flex justify-between\",\n          children: [/*#__PURE__*/_jsxDEV(\"span\", {\n            className: \"text-gray-600\",\n            children: [\"Customer Discount (\", quote.customerDiscount, \"%):\"]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 267,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n            className: \"text-red-600\",\n            children: [\"-$\", (quote.subtotal * quote.customerDiscount / 100).toFixed(2)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 268,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 266,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"flex justify-between items-center\",\n          children: [/*#__PURE__*/_jsxDEV(\"span\", {\n            className: \"text-gray-600\",\n            children: \"Order Discount:\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 273,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"flex items-center space-x-2\",\n            children: [/*#__PURE__*/_jsxDEV(\"input\", {\n              type: \"number\",\n              min: \"0\",\n              step: \"0.01\",\n              value: orderDiscount,\n              onChange: e => setOrderDiscount(parseFloat(e.target.value) || 0),\n              className: \"w-24 px-2 py-1 border border-gray-300 rounded text-right\",\n              placeholder: \"0.00\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 275,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n              onClick: applyOrderDiscount,\n              className: \"px-3 py-1 bg-blue-600 text-white text-sm rounded hover:bg-blue-700\",\n              children: \"Apply\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 284,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 274,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 272,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"pt-3 border-t border-gray-200\",\n          children: /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"flex justify-between items-center\",\n            children: [/*#__PURE__*/_jsxDEV(\"span\", {\n              className: \"text-lg font-semibold text-gray-900\",\n              children: \"Final Total:\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 295,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n              className: \"text-xl font-bold text-green-600\",\n              children: [\"$\", quote.finalTotal.toFixed(2)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 296,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 294,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 293,\n          columnNumber: 11\n        }, this), quote.requiresApproval && /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"mt-4 p-3 bg-yellow-50 border border-yellow-200 rounded\",\n          children: /*#__PURE__*/_jsxDEV(\"p\", {\n            className: \"text-sm text-yellow-800\",\n            children: [\"\\u26A0\\uFE0F This quote requires approval as it exceeds $\", quote.approvalThreshold.toLocaleString()]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 302,\n            columnNumber: 15\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 301,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 259,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 256,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 173,\n    columnNumber: 5\n  }, this);\n};\n\n// Extracted ItemRow component for cleaner code\n_s(SimplifiedQuoteBuilder, \"X45rKJKx3TEbBLoFdkrJE/RttyY=\");\n_c = SimplifiedQuoteBuilder;\nconst ItemRow = ({\n  item,\n  product,\n  getProcessing,\n  getAvailableProcessings,\n  updateQuantity,\n  removeItem,\n  addProcessingToItem,\n  removeProcessingFromItem\n}) => {\n  if (!product) return null;\n  const currentProcessingIds = item.appliedProcessings.map(ap => ap.processingId);\n  const availableProcessings = getAvailableProcessings(item.productId, currentProcessingIds);\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"p-6\",\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"flex justify-between items-start mb-4\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"flex-1\",\n        children: [/*#__PURE__*/_jsxDEV(\"h4\", {\n          className: \"text-lg font-medium text-gray-900\",\n          children: product.name\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 342,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n          className: \"text-sm text-gray-600\",\n          children: product.description\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 343,\n          columnNumber: 11\n        }, this), product.dimensions && /*#__PURE__*/_jsxDEV(\"p\", {\n          className: \"text-xs text-gray-500 mt-1\",\n          children: [product.dimensions.width, \"\\\"W \\xD7 \", product.dimensions.height, \"\\\"H \\xD7 \", product.dimensions.depth, \"\\\"D\"]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 345,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 341,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"flex items-center space-x-4\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"flex items-center space-x-2\",\n          children: [/*#__PURE__*/_jsxDEV(\"label\", {\n            className: \"text-sm text-gray-600\",\n            children: \"Qty:\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 353,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n            type: \"number\",\n            min: \"1\",\n            value: item.quantity,\n            onChange: e => updateQuantity(item.id, parseInt(e.target.value) || 1),\n            className: \"w-16 px-2 py-1 border border-gray-300 rounded text-center\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 354,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 352,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"text-right\",\n          children: [/*#__PURE__*/_jsxDEV(\"p\", {\n            className: \"text-lg font-semibold text-gray-900\",\n            children: [\"$\", item.totalPrice.toFixed(2)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 364,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n            className: \"text-xs text-gray-500\",\n            children: [\"Base: $\", (item.basePrice * item.quantity).toFixed(2)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 367,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 363,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          onClick: () => removeItem(item.id),\n          className: \"text-red-600 hover:text-red-800 p-1\",\n          title: \"Remove item\",\n          children: \"\\u2715\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 372,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 351,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 340,\n      columnNumber: 7\n    }, this), item.appliedProcessings.length > 0 && /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"mb-4\",\n      children: [/*#__PURE__*/_jsxDEV(\"h5\", {\n        className: \"text-sm font-medium text-gray-700 mb-2\",\n        children: \"Applied Processings:\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 385,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"space-y-2\",\n        children: item.appliedProcessings.map(ap => {\n          const processing = getProcessing(ap.processingId);\n          return /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"flex justify-between items-center bg-blue-50 px-3 py-2 rounded\",\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              children: [/*#__PURE__*/_jsxDEV(\"span\", {\n                className: \"text-sm font-medium text-blue-900\",\n                children: processing === null || processing === void 0 ? void 0 : processing.name\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 392,\n                columnNumber: 21\n              }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                className: \"text-xs text-blue-700 ml-2\",\n                children: processing === null || processing === void 0 ? void 0 : processing.description\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 393,\n                columnNumber: 21\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 391,\n              columnNumber: 19\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"flex items-center space-x-2\",\n              children: [/*#__PURE__*/_jsxDEV(\"span\", {\n                className: \"text-sm font-medium text-blue-900\",\n                children: [\"+$\", ap.calculatedPrice.toFixed(2)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 396,\n                columnNumber: 21\n              }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n                onClick: () => removeProcessingFromItem(item.id, ap.processingId),\n                className: \"text-red-600 hover:text-red-800 text-xs\",\n                children: \"Remove\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 399,\n                columnNumber: 21\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 395,\n              columnNumber: 19\n            }, this)]\n          }, ap.processingId, true, {\n            fileName: _jsxFileName,\n            lineNumber: 390,\n            columnNumber: 17\n          }, this);\n        })\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 386,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 384,\n      columnNumber: 9\n    }, this), availableProcessings.length > 0 && /*#__PURE__*/_jsxDEV(\"div\", {\n      children: [/*#__PURE__*/_jsxDEV(\"h5\", {\n        className: \"text-sm font-medium text-gray-700 mb-2\",\n        children: \"Available Processings:\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 416,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-3\",\n        children: availableProcessings.map(processing => /*#__PURE__*/_jsxDEV(\"button\", {\n          onClick: () => addProcessingToItem(item.id, processing.id),\n          className: \"text-left p-3 border border-gray-200 rounded hover:border-blue-300 hover:bg-blue-50 transition-colors\",\n          children: /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"flex justify-between items-start\",\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              children: [/*#__PURE__*/_jsxDEV(\"h6\", {\n                className: \"text-sm font-medium text-gray-900\",\n                children: processing.name\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 426,\n                columnNumber: 21\n              }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n                className: \"text-xs text-gray-600\",\n                children: processing.description\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 427,\n                columnNumber: 21\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 425,\n              columnNumber: 19\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"text-right\",\n              children: [/*#__PURE__*/_jsxDEV(\"p\", {\n                className: \"text-sm font-medium text-green-600\",\n                children: processing.pricingType === 'percentage' ? `${(processing.price * 100).toFixed(0)}%` : `$${processing.price.toFixed(2)}`\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 430,\n                columnNumber: 21\n              }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n                className: \"text-xs text-gray-500\",\n                children: processing.pricingType.replace('_', ' ')\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 436,\n                columnNumber: 21\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 429,\n              columnNumber: 19\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 424,\n            columnNumber: 17\n          }, this)\n        }, processing.id, false, {\n          fileName: _jsxFileName,\n          lineNumber: 419,\n          columnNumber: 15\n        }, this))\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 417,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 415,\n      columnNumber: 9\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 339,\n    columnNumber: 5\n  }, this);\n};\n_c2 = ItemRow;\nexport default SimplifiedQuoteBuilder;\nvar _c, _c2;\n$RefreshReg$(_c, \"SimplifiedQuoteBuilder\");\n$RefreshReg$(_c2, \"ItemRow\");","map":{"version":3,"names":["React","useState","jsxDEV","_jsxDEV","SimplifiedQuoteBuilder","quote","rooms","products","processings","processingRules","productDependencies","onQuoteUpdate","_s","_getRoom","console","log","items","length","selectedRoomFilter","setSelectedRoomFilter","orderDiscount","setOrderDiscount","getProduct","productId","find","p","id","getProcessing","processingId","getRoom","roomId","r","filteredItems","filter","item","updateQuantity","itemId","newQuantity","updatedItems","map","updatedItem","quantity","totalPrice","basePrice","appliedProcessings","reduce","sum","ap","calculatedPrice","recalculateQuote","removeItem","getAvailableProcessings","currentProcessings","product","available","proc","applicableProductCategories","includes","category","mutualExclusionRules","rule","type","forEach","hasConflicting","some","procId","_rule$conditions$proc","conditions","processingIds","actions","excludeProcessings","_rule$actions$exclude","addProcessingToItem","i","processing","pricingType","price","dimensions","width","removeProcessingFromItem","applyOrderDiscount","updatedQuote","subtotal","customerDiscount","totalDiscount","finalTotal","finalQuote","requiresApproval","approvalThreshold","itemsByRoom","acc","push","className","children","fileName","_jsxFileName","lineNumber","columnNumber","value","onChange","e","target","room","roomItems","name","ItemRow","toFixed","min","step","parseFloat","placeholder","onClick","toLocaleString","_c","currentProcessingIds","availableProcessings","description","height","depth","parseInt","title","replace","_c2","$RefreshReg$"],"sources":["/Users/dkjesuschua/Documents/demo_cpq/src/components/SimplifiedQuoteBuilder.tsx"],"sourcesContent":["import React, { useState } from 'react';\nimport { Quote, Product, Processing, ProcessingRule, ProductDependency, Room } from '../types';\n\ninterface SimplifiedQuoteBuilderProps {\n  quote: Quote;\n  rooms: Room[];\n  products: Product[];\n  processings: Processing[];\n  processingRules: ProcessingRule[];\n  productDependencies: ProductDependency[];\n  onQuoteUpdate: (quote: Quote) => void;\n}\n\nconst SimplifiedQuoteBuilder: React.FC<SimplifiedQuoteBuilderProps> = ({\n  quote,\n  rooms,\n  products,\n  processings,\n  processingRules,\n  productDependencies,\n  onQuoteUpdate\n}) => {\n  console.log('SimplifiedQuoteBuilder: quote.items count:', quote.items.length);\n  console.log('SimplifiedQuoteBuilder: products count:', products.length);\n  console.log('SimplifiedQuoteBuilder: processings count:', processings.length);\n  \n  const [selectedRoomFilter, setSelectedRoomFilter] = useState<string>('all');\n  const [orderDiscount, setOrderDiscount] = useState(quote.orderDiscount);\n\n  const getProduct = (productId: string) => products.find(p => p.id === productId);\n  const getProcessing = (processingId: string) => processings.find(p => p.id === processingId);\n  const getRoom = (roomId: string) => rooms.find(r => r.id === roomId);\n\n  const filteredItems = selectedRoomFilter === 'all' \n    ? quote.items \n    : quote.items.filter(item => item.roomId === selectedRoomFilter);\n\n  const updateQuantity = (itemId: string, newQuantity: number) => {\n    const updatedItems = quote.items.map(item => {\n      if (item.id === itemId) {\n        const updatedItem = { ...item, quantity: newQuantity };\n        updatedItem.totalPrice = (updatedItem.basePrice * newQuantity) + \n          updatedItem.appliedProcessings.reduce((sum, ap) => sum + ap.calculatedPrice, 0);\n        return updatedItem;\n      }\n      return item;\n    });\n\n    recalculateQuote({ ...quote, items: updatedItems });\n  };\n\n  const removeItem = (itemId: string) => {\n    const updatedItems = quote.items.filter(item => item.id !== itemId);\n    recalculateQuote({ ...quote, items: updatedItems });\n  };\n\n  const getAvailableProcessings = (productId: string, currentProcessings: string[]) => {\n    const product = getProduct(productId);\n    if (!product) return [];\n\n    // Get processings applicable to this product category\n    let available = processings.filter(proc => \n      proc.applicableProductCategories.includes(product.category)\n    );\n\n    // Apply mutual exclusion rules\n    const mutualExclusionRules = processingRules.filter(rule => \n      rule.type === 'mutual_exclusion'\n    );\n\n    mutualExclusionRules.forEach(rule => {\n      const hasConflicting = currentProcessings.some(procId => \n        rule.conditions.processingIds?.includes(procId)\n      );\n      \n      if (hasConflicting && rule.actions.excludeProcessings) {\n        available = available.filter(proc => \n          !rule.actions.excludeProcessings?.includes(proc.id)\n        );\n      }\n    });\n\n    // Remove already applied processings\n    available = available.filter(proc => !currentProcessings.includes(proc.id));\n\n    return available;\n  };\n\n  const addProcessingToItem = (itemId: string, processingId: string) => {\n    const item = quote.items.find(i => i.id === itemId);\n    const processing = getProcessing(processingId);\n    const product = item ? getProduct(item.productId) : null;\n    \n    if (!item || !processing || !product) return;\n\n    // Calculate processing price\n    let calculatedPrice = 0;\n    if (processing.pricingType === 'per_unit') {\n      calculatedPrice = processing.price * item.quantity;\n    } else if (processing.pricingType === 'percentage') {\n      calculatedPrice = item.basePrice * item.quantity * processing.price;\n    } else if (processing.pricingType === 'per_dimension' && product.dimensions) {\n      calculatedPrice = (product.dimensions.width || 0) * processing.price;\n    }\n\n    const updatedItems = quote.items.map(i => {\n      if (i.id === itemId) {\n        const updatedItem = {\n          ...i,\n          appliedProcessings: [\n            ...i.appliedProcessings,\n            { processingId, calculatedPrice }\n          ]\n        };\n        updatedItem.totalPrice = (updatedItem.basePrice * updatedItem.quantity) + \n          updatedItem.appliedProcessings.reduce((sum, ap) => sum + ap.calculatedPrice, 0);\n        return updatedItem;\n      }\n      return i;\n    });\n\n    recalculateQuote({ ...quote, items: updatedItems });\n  };\n\n  const removeProcessingFromItem = (itemId: string, processingId: string) => {\n    const updatedItems = quote.items.map(item => {\n      if (item.id === itemId) {\n        const updatedItem = {\n          ...item,\n          appliedProcessings: item.appliedProcessings.filter(ap => ap.processingId !== processingId)\n        };\n        updatedItem.totalPrice = (updatedItem.basePrice * updatedItem.quantity) + \n          updatedItem.appliedProcessings.reduce((sum, ap) => sum + ap.calculatedPrice, 0);\n        return updatedItem;\n      }\n      return item;\n    });\n\n    recalculateQuote({ ...quote, items: updatedItems });\n  };\n\n  const applyOrderDiscount = () => {\n    const updatedQuote = { ...quote, orderDiscount };\n    recalculateQuote(updatedQuote);\n  };\n\n  const recalculateQuote = (updatedQuote: Quote) => {\n    const subtotal = updatedQuote.items.reduce((sum, item) => sum + item.totalPrice, 0);\n    const customerDiscount = subtotal * (updatedQuote.customerDiscount / 100);\n    const totalDiscount = customerDiscount + updatedQuote.orderDiscount;\n    const finalTotal = subtotal - totalDiscount;\n\n    const finalQuote = {\n      ...updatedQuote,\n      subtotal,\n      totalDiscount,\n      finalTotal,\n      requiresApproval: finalTotal > updatedQuote.approvalThreshold\n    };\n\n    onQuoteUpdate(finalQuote);\n  };\n\n  // Group items by room for better organization\n  const itemsByRoom = quote.items.reduce((acc, item) => {\n    const roomId = item.roomId;\n    if (!acc[roomId]) acc[roomId] = [];\n    acc[roomId].push(item);\n    return acc;\n  }, {} as Record<string, typeof quote.items>);\n\n  return (\n    <div className=\"space-y-6\">\n      {/* Room Filter */}\n      <div className=\"bg-white rounded-lg shadow p-4\">\n        <div className=\"flex items-center justify-between\">\n          <h3 className=\"text-lg font-medium text-gray-900\">Filter by Room</h3>\n          <select\n            value={selectedRoomFilter}\n            onChange={(e) => setSelectedRoomFilter(e.target.value)}\n            className=\"px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500\"\n          >\n            <option value=\"all\">All Rooms ({quote.items.length} items)</option>\n            {rooms.map(room => {\n              const roomItems = quote.items.filter(item => item.roomId === room.id);\n              return (\n                <option key={room.id} value={room.id}>\n                  {room.name} ({roomItems.length} items)\n                </option>\n              );\n            })}\n          </select>\n        </div>\n      </div>\n\n      {/* Quote Items by Room */}\n      <div className=\"space-y-6\">\n        {selectedRoomFilter === 'all' ? (\n          // Show all rooms\n          rooms.map(room => {\n            const roomItems = itemsByRoom[room.id] || [];\n            if (roomItems.length === 0) return null;\n\n            return (\n              <div key={room.id} className=\"bg-white rounded-lg shadow\">\n                <div className=\"p-4 border-b border-gray-200 bg-blue-50\">\n                  <h3 className=\"text-lg font-medium text-gray-900\">{room.name}</h3>\n                  <p className=\"text-sm text-gray-600\">{roomItems.length} items</p>\n                </div>\n                <div className=\"divide-y divide-gray-200\">\n                  {roomItems.map(item => (\n                    <ItemRow\n                      key={item.id}\n                      item={item}\n                      product={getProduct(item.productId)}\n                      getProcessing={getProcessing}\n                      getAvailableProcessings={getAvailableProcessings}\n                      updateQuantity={updateQuantity}\n                      removeItem={removeItem}\n                      addProcessingToItem={addProcessingToItem}\n                      removeProcessingFromItem={removeProcessingFromItem}\n                    />\n                  ))}\n                </div>\n              </div>\n            );\n          })\n        ) : (\n          // Show single room\n          <div className=\"bg-white rounded-lg shadow\">\n            <div className=\"p-4 border-b border-gray-200\">\n              <h3 className=\"text-lg font-medium text-gray-900\">\n                {getRoom(selectedRoomFilter)?.name || 'Room'} Items\n              </h3>\n            </div>\n            <div className=\"divide-y divide-gray-200\">\n              {filteredItems.map(item => (\n                <ItemRow\n                  key={item.id}\n                  item={item}\n                  product={getProduct(item.productId)}\n                  getProcessing={getProcessing}\n                  getAvailableProcessings={getAvailableProcessings}\n                  updateQuantity={updateQuantity}\n                  removeItem={removeItem}\n                  addProcessingToItem={addProcessingToItem}\n                  removeProcessingFromItem={removeProcessingFromItem}\n                />\n              ))}\n            </div>\n          </div>\n        )}\n      </div>\n\n      {/* Quote Totals */}\n      <div className=\"bg-white rounded-lg shadow p-6\">\n        <h3 className=\"text-lg font-medium text-gray-900 mb-4\">Quote Summary</h3>\n        \n        <div className=\"space-y-3\">\n          <div className=\"flex justify-between\">\n            <span className=\"text-gray-600\">Subtotal:</span>\n            <span className=\"font-medium\">${quote.subtotal.toFixed(2)}</span>\n          </div>\n          \n          {quote.customerDiscount > 0 && (\n            <div className=\"flex justify-between\">\n              <span className=\"text-gray-600\">Customer Discount ({quote.customerDiscount}%):</span>\n              <span className=\"text-red-600\">-${(quote.subtotal * quote.customerDiscount / 100).toFixed(2)}</span>\n            </div>\n          )}\n          \n          <div className=\"flex justify-between items-center\">\n            <span className=\"text-gray-600\">Order Discount:</span>\n            <div className=\"flex items-center space-x-2\">\n              <input\n                type=\"number\"\n                min=\"0\"\n                step=\"0.01\"\n                value={orderDiscount}\n                onChange={(e) => setOrderDiscount(parseFloat(e.target.value) || 0)}\n                className=\"w-24 px-2 py-1 border border-gray-300 rounded text-right\"\n                placeholder=\"0.00\"\n              />\n              <button\n                onClick={applyOrderDiscount}\n                className=\"px-3 py-1 bg-blue-600 text-white text-sm rounded hover:bg-blue-700\"\n              >\n                Apply\n              </button>\n            </div>\n          </div>\n\n          <div className=\"pt-3 border-t border-gray-200\">\n            <div className=\"flex justify-between items-center\">\n              <span className=\"text-lg font-semibold text-gray-900\">Final Total:</span>\n              <span className=\"text-xl font-bold text-green-600\">${quote.finalTotal.toFixed(2)}</span>\n            </div>\n          </div>\n\n          {quote.requiresApproval && (\n            <div className=\"mt-4 p-3 bg-yellow-50 border border-yellow-200 rounded\">\n              <p className=\"text-sm text-yellow-800\">\n                ⚠️ This quote requires approval as it exceeds ${quote.approvalThreshold.toLocaleString()}\n              </p>\n            </div>\n          )}\n        </div>\n      </div>\n    </div>\n  );\n};\n\n// Extracted ItemRow component for cleaner code\nconst ItemRow: React.FC<{\n  item: any;\n  product: any;\n  getProcessing: any;\n  getAvailableProcessings: any;\n  updateQuantity: any;\n  removeItem: any;\n  addProcessingToItem: any;\n  removeProcessingFromItem: any;\n}> = ({\n  item,\n  product,\n  getProcessing,\n  getAvailableProcessings,\n  updateQuantity,\n  removeItem,\n  addProcessingToItem,\n  removeProcessingFromItem\n}) => {\n  if (!product) return null;\n\n  const currentProcessingIds = item.appliedProcessings.map((ap: any) => ap.processingId);\n  const availableProcessings = getAvailableProcessings(item.productId, currentProcessingIds);\n\n  return (\n    <div className=\"p-6\">\n      <div className=\"flex justify-between items-start mb-4\">\n        <div className=\"flex-1\">\n          <h4 className=\"text-lg font-medium text-gray-900\">{product.name}</h4>\n          <p className=\"text-sm text-gray-600\">{product.description}</p>\n          {product.dimensions && (\n            <p className=\"text-xs text-gray-500 mt-1\">\n              {product.dimensions.width}\"W × {product.dimensions.height}\"H × {product.dimensions.depth}\"D\n            </p>\n          )}\n        </div>\n        \n        <div className=\"flex items-center space-x-4\">\n          <div className=\"flex items-center space-x-2\">\n            <label className=\"text-sm text-gray-600\">Qty:</label>\n            <input\n              type=\"number\"\n              min=\"1\"\n              value={item.quantity}\n              onChange={(e) => updateQuantity(item.id, parseInt(e.target.value) || 1)}\n              className=\"w-16 px-2 py-1 border border-gray-300 rounded text-center\"\n            />\n          </div>\n          \n          <div className=\"text-right\">\n            <p className=\"text-lg font-semibold text-gray-900\">\n              ${item.totalPrice.toFixed(2)}\n            </p>\n            <p className=\"text-xs text-gray-500\">\n              Base: ${(item.basePrice * item.quantity).toFixed(2)}\n            </p>\n          </div>\n          \n          <button\n            onClick={() => removeItem(item.id)}\n            className=\"text-red-600 hover:text-red-800 p-1\"\n            title=\"Remove item\"\n          >\n            ✕\n          </button>\n        </div>\n      </div>\n\n      {/* Applied Processings */}\n      {item.appliedProcessings.length > 0 && (\n        <div className=\"mb-4\">\n          <h5 className=\"text-sm font-medium text-gray-700 mb-2\">Applied Processings:</h5>\n          <div className=\"space-y-2\">\n            {item.appliedProcessings.map((ap: any) => {\n              const processing = getProcessing(ap.processingId);\n              return (\n                <div key={ap.processingId} className=\"flex justify-between items-center bg-blue-50 px-3 py-2 rounded\">\n                  <div>\n                    <span className=\"text-sm font-medium text-blue-900\">{processing?.name}</span>\n                    <span className=\"text-xs text-blue-700 ml-2\">{processing?.description}</span>\n                  </div>\n                  <div className=\"flex items-center space-x-2\">\n                    <span className=\"text-sm font-medium text-blue-900\">\n                      +${ap.calculatedPrice.toFixed(2)}\n                    </span>\n                    <button\n                      onClick={() => removeProcessingFromItem(item.id, ap.processingId)}\n                      className=\"text-red-600 hover:text-red-800 text-xs\"\n                    >\n                      Remove\n                    </button>\n                  </div>\n                </div>\n              );\n            })}\n          </div>\n        </div>\n      )}\n\n      {/* Available Processings */}\n      {availableProcessings.length > 0 && (\n        <div>\n          <h5 className=\"text-sm font-medium text-gray-700 mb-2\">Available Processings:</h5>\n          <div className=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-3\">\n            {availableProcessings.map((processing: any) => (\n              <button\n                key={processing.id}\n                onClick={() => addProcessingToItem(item.id, processing.id)}\n                className=\"text-left p-3 border border-gray-200 rounded hover:border-blue-300 hover:bg-blue-50 transition-colors\"\n              >\n                <div className=\"flex justify-between items-start\">\n                  <div>\n                    <h6 className=\"text-sm font-medium text-gray-900\">{processing.name}</h6>\n                    <p className=\"text-xs text-gray-600\">{processing.description}</p>\n                  </div>\n                  <div className=\"text-right\">\n                    <p className=\"text-sm font-medium text-green-600\">\n                      {processing.pricingType === 'percentage' \n                        ? `${(processing.price * 100).toFixed(0)}%`\n                        : `$${processing.price.toFixed(2)}`\n                      }\n                    </p>\n                    <p className=\"text-xs text-gray-500\">{processing.pricingType.replace('_', ' ')}</p>\n                  </div>\n                </div>\n              </button>\n            ))}\n          </div>\n        </div>\n      )}\n    </div>\n  );\n};\n\nexport default SimplifiedQuoteBuilder;\n\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}