{"ast":null,"code":"var _jsxFileName = \"/Users/dkjesuschua/Documents/demo_cpq/src/components/ImprovedProcessingManager.tsx\",\n  _s = $RefreshSig$();\nimport React, { useState } from 'react';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst ImprovedProcessingManager = ({\n  quote,\n  rooms,\n  products,\n  processings,\n  processingRules,\n  productDependencies,\n  onQuoteUpdate\n}) => {\n  _s();\n  var _quote$subtotal, _quote$finalTotal;\n  const [selectedItemId, setSelectedItemId] = useState(null);\n  const getProduct = productId => products.find(p => p.id === productId);\n  const getProcessing = processingId => processings.find(p => p.id === processingId);\n  const getAvailableProcessings = (productId, currentProcessings) => {\n    const product = getProduct(productId);\n    if (!product) return [];\n    let available = processings.filter(proc => proc.applicableProductCategories.includes(product.category));\n\n    // Apply processing rules for mutual exclusions\n    processingRules.forEach(rule => {\n      if (rule.type === 'mutual_exclusion' && rule.conditions.processingIds && currentProcessings.some(id => rule.conditions.processingIds.includes(id))) {\n        available = available.filter(proc => !rule.conditions.processingIds.includes(proc.id) || currentProcessings.includes(proc.id));\n      }\n    });\n\n    // Remove already applied processings\n    available = available.filter(proc => !currentProcessings.includes(proc.id));\n    return available;\n  };\n  const addProcessingToItem = (itemId, processingId) => {\n    const processing = getProcessing(processingId);\n    if (!processing) return;\n    const updatedItems = quote.items.map(item => {\n      if (item.id === itemId) {\n        const product = getProduct(item.productId);\n        if (!product) return item;\n        let calculatedPrice = 0;\n        if (processing.pricingType === 'percentage') {\n          calculatedPrice = product.basePrice * processing.price;\n        } else {\n          calculatedPrice = processing.price;\n        }\n        const newProcessing = {\n          processingId,\n          calculatedPrice,\n          appliedDate: new Date().toISOString()\n        };\n        const updatedItem = {\n          ...item,\n          appliedProcessings: [...item.appliedProcessings, newProcessing]\n        };\n\n        // Recalculate total price\n        const processingTotal = updatedItem.appliedProcessings.reduce((sum, ap) => sum + ap.calculatedPrice, 0);\n        updatedItem.totalPrice = (product.basePrice + processingTotal) * item.quantity;\n        return updatedItem;\n      }\n      return item;\n    });\n    recalculateQuote({\n      ...quote,\n      items: updatedItems\n    });\n  };\n  const removeProcessingFromItem = (itemId, processingId) => {\n    const updatedItems = quote.items.map(item => {\n      if (item.id === itemId) {\n        const product = getProduct(item.productId);\n        if (!product) return item;\n        const updatedItem = {\n          ...item,\n          appliedProcessings: item.appliedProcessings.filter(ap => ap.processingId !== processingId)\n        };\n\n        // Recalculate total price\n        const processingTotal = updatedItem.appliedProcessings.reduce((sum, ap) => sum + ap.calculatedPrice, 0);\n        updatedItem.totalPrice = (product.basePrice + processingTotal) * item.quantity;\n        return updatedItem;\n      }\n      return item;\n    });\n    recalculateQuote({\n      ...quote,\n      items: updatedItems\n    });\n  };\n  const updateQuantity = (itemId, newQuantity) => {\n    const updatedItems = quote.items.map(item => {\n      if (item.id === itemId) {\n        const product = getProduct(item.productId);\n        if (!product) return item;\n        const updatedItem = {\n          ...item,\n          quantity: newQuantity\n        };\n        const processingTotal = updatedItem.appliedProcessings.reduce((sum, ap) => sum + ap.calculatedPrice, 0);\n        updatedItem.totalPrice = (product.basePrice + processingTotal) * newQuantity;\n        return updatedItem;\n      }\n      return item;\n    });\n    recalculateQuote({\n      ...quote,\n      items: updatedItems\n    });\n  };\n  const removeItem = itemId => {\n    const updatedItems = quote.items.filter(item => item.id !== itemId);\n    recalculateQuote({\n      ...quote,\n      items: updatedItems\n    });\n    if (selectedItemId === itemId) {\n      setSelectedItemId(null);\n    }\n  };\n  const recalculateQuote = updatedQuote => {\n    const subtotal = updatedQuote.items.reduce((sum, item) => sum + item.totalPrice, 0);\n    const customerDiscount = subtotal * (updatedQuote.customerDiscount / 100);\n    const orderDiscount = updatedQuote.orderDiscount || 0;\n    const totalDiscount = customerDiscount + orderDiscount;\n    const finalTotal = subtotal - totalDiscount;\n    const finalQuote = {\n      ...updatedQuote,\n      orderDiscount,\n      subtotal,\n      totalDiscount,\n      finalTotal\n    };\n    onQuoteUpdate(finalQuote);\n  };\n  const selectedItem = selectedItemId ? quote.items.find(item => item.id === selectedItemId) : null;\n  const selectedProduct = selectedItem ? getProduct(selectedItem.productId) : null;\n  const availableProcessings = selectedItem ? getAvailableProcessings(selectedItem.productId, selectedItem.appliedProcessings.map(ap => ap.processingId)) : [];\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"space-y-6\",\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"bg-white rounded-lg shadow\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"p-4 border-b border-gray-200\",\n        children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n          className: \"text-lg font-medium text-gray-900\",\n          children: [\"Quote Items (\", quote.items.length, \")\"]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 165,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n          className: \"text-sm text-gray-600\",\n          children: \"Click on a product to configure its processings\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 166,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 164,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"overflow-x-auto\",\n        children: /*#__PURE__*/_jsxDEV(\"table\", {\n          className: \"min-w-full divide-y divide-gray-200\",\n          children: [/*#__PURE__*/_jsxDEV(\"thead\", {\n            className: \"bg-gray-50\",\n            children: /*#__PURE__*/_jsxDEV(\"tr\", {\n              children: [/*#__PURE__*/_jsxDEV(\"th\", {\n                className: \"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\",\n                children: \"Product\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 173,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n                className: \"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\",\n                children: \"Qty\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 174,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n                className: \"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\",\n                children: \"Processings\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 175,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n                className: \"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\",\n                children: \"Price\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 176,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n                className: \"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\",\n                children: \"Actions\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 177,\n                columnNumber: 17\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 172,\n              columnNumber: 15\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 171,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"tbody\", {\n            className: \"bg-white divide-y divide-gray-200\",\n            children: quote.items.map(item => {\n              const product = getProduct(item.productId);\n              const isSelected = selectedItemId === item.id;\n              return /*#__PURE__*/_jsxDEV(\"tr\", {\n                className: `hover:bg-gray-50 cursor-pointer ${isSelected ? 'bg-blue-50 border-l-4 border-blue-500' : ''}`,\n                onClick: () => setSelectedItemId(item.id),\n                children: [/*#__PURE__*/_jsxDEV(\"td\", {\n                  className: \"px-6 py-4 whitespace-nowrap\",\n                  children: /*#__PURE__*/_jsxDEV(\"div\", {\n                    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                      className: \"text-sm font-medium text-gray-900\",\n                      children: product === null || product === void 0 ? void 0 : product.name\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 193,\n                      columnNumber: 25\n                    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                      className: \"text-sm text-gray-500\",\n                      children: product === null || product === void 0 ? void 0 : product.description\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 194,\n                      columnNumber: 25\n                    }, this)]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 192,\n                    columnNumber: 23\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 191,\n                  columnNumber: 21\n                }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                  className: \"px-6 py-4 whitespace-nowrap\",\n                  children: /*#__PURE__*/_jsxDEV(\"input\", {\n                    type: \"number\",\n                    min: \"1\",\n                    value: item.quantity,\n                    onChange: e => updateQuantity(item.id, parseInt(e.target.value) || 1),\n                    className: \"w-16 px-2 py-1 border border-gray-300 rounded text-center\",\n                    onClick: e => e.stopPropagation()\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 198,\n                    columnNumber: 23\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 197,\n                  columnNumber: 21\n                }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                  className: \"px-6 py-4\",\n                  children: /*#__PURE__*/_jsxDEV(\"div\", {\n                    className: \"flex flex-wrap gap-1\",\n                    children: [item.appliedProcessings.map(ap => {\n                      const processing = getProcessing(ap.processingId);\n                      return /*#__PURE__*/_jsxDEV(\"span\", {\n                        className: \"inline-flex items-center px-2 py-1 rounded-full text-xs font-medium bg-blue-100 text-blue-800\",\n                        children: [processing === null || processing === void 0 ? void 0 : processing.name, /*#__PURE__*/_jsxDEV(\"button\", {\n                          onClick: e => {\n                            e.stopPropagation();\n                            removeProcessingFromItem(item.id, ap.processingId);\n                          },\n                          className: \"ml-1 text-blue-600 hover:text-blue-800\",\n                          children: \"\\xD7\"\n                        }, void 0, false, {\n                          fileName: _jsxFileName,\n                          lineNumber: 214,\n                          columnNumber: 31\n                        }, this)]\n                      }, ap.processingId, true, {\n                        fileName: _jsxFileName,\n                        lineNumber: 212,\n                        columnNumber: 29\n                      }, this);\n                    }), item.appliedProcessings.length === 0 && /*#__PURE__*/_jsxDEV(\"span\", {\n                      className: \"text-sm text-gray-400\",\n                      children: \"No processings\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 227,\n                      columnNumber: 27\n                    }, this)]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 208,\n                    columnNumber: 23\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 207,\n                  columnNumber: 21\n                }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                  className: \"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900\",\n                  children: [\"$\", item.totalPrice.toFixed(2)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 231,\n                  columnNumber: 21\n                }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                  className: \"px-6 py-4 whitespace-nowrap\",\n                  children: /*#__PURE__*/_jsxDEV(\"button\", {\n                    onClick: e => {\n                      e.stopPropagation();\n                      removeItem(item.id);\n                    },\n                    className: \"text-red-600 hover:text-red-800\",\n                    children: \"Remove\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 235,\n                    columnNumber: 23\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 234,\n                  columnNumber: 21\n                }, this)]\n              }, item.id, true, {\n                fileName: _jsxFileName,\n                lineNumber: 186,\n                columnNumber: 19\n              }, this);\n            })\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 180,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 170,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 169,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 163,\n      columnNumber: 7\n    }, this), selectedItem && selectedProduct && /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"bg-white rounded-lg shadow\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"p-4 border-b border-gray-200 bg-blue-50\",\n        children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n          className: \"text-lg font-medium text-gray-900\",\n          children: [\"Configure: \", selectedProduct.name]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 257,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n          className: \"text-sm text-gray-600\",\n          children: \"Add processings to customize this product\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 258,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 256,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"p-6\",\n        children: [selectedItem.appliedProcessings.length > 0 && /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"mb-6\",\n          children: [/*#__PURE__*/_jsxDEV(\"h4\", {\n            className: \"text-sm font-medium text-gray-700 mb-3\",\n            children: \"Applied Processings\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 265,\n            columnNumber: 17\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"space-y-2\",\n            children: selectedItem.appliedProcessings.map(ap => {\n              const processing = getProcessing(ap.processingId);\n              return /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"flex justify-between items-center bg-green-50 px-4 py-3 rounded-lg border border-green-200\",\n                children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                  children: [/*#__PURE__*/_jsxDEV(\"span\", {\n                    className: \"text-sm font-medium text-green-900\",\n                    children: processing === null || processing === void 0 ? void 0 : processing.name\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 272,\n                    columnNumber: 27\n                  }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                    className: \"text-xs text-green-700 ml-2\",\n                    children: processing === null || processing === void 0 ? void 0 : processing.description\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 273,\n                    columnNumber: 27\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 271,\n                  columnNumber: 25\n                }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"flex items-center space-x-3\",\n                  children: [/*#__PURE__*/_jsxDEV(\"span\", {\n                    className: \"text-sm font-medium text-green-900\",\n                    children: [\"+$\", ap.calculatedPrice.toFixed(2)]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 276,\n                    columnNumber: 27\n                  }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n                    onClick: () => removeProcessingFromItem(selectedItem.id, ap.processingId),\n                    className: \"text-red-600 hover:text-red-800 text-sm px-2 py-1 rounded hover:bg-red-50\",\n                    children: \"Remove\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 279,\n                    columnNumber: 27\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 275,\n                  columnNumber: 25\n                }, this)]\n              }, ap.processingId, true, {\n                fileName: _jsxFileName,\n                lineNumber: 270,\n                columnNumber: 23\n              }, this);\n            })\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 266,\n            columnNumber: 17\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 264,\n          columnNumber: 15\n        }, this), availableProcessings.length > 0 && /*#__PURE__*/_jsxDEV(\"div\", {\n          children: [/*#__PURE__*/_jsxDEV(\"h4\", {\n            className: \"text-sm font-medium text-gray-700 mb-3\",\n            children: \"Available Processings\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 296,\n            columnNumber: 17\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4\",\n            children: availableProcessings.map(processing => /*#__PURE__*/_jsxDEV(\"button\", {\n              onClick: () => addProcessingToItem(selectedItem.id, processing.id),\n              className: \"text-left p-4 border border-gray-200 rounded-lg hover:border-blue-300 hover:bg-blue-50 transition-colors\",\n              children: /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"flex justify-between items-start\",\n                children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                  children: [/*#__PURE__*/_jsxDEV(\"h5\", {\n                    className: \"text-sm font-medium text-gray-900\",\n                    children: processing.name\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 306,\n                    columnNumber: 27\n                  }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n                    className: \"text-xs text-gray-600 mt-1\",\n                    children: processing.description\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 307,\n                    columnNumber: 27\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 305,\n                  columnNumber: 25\n                }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"text-right ml-2\",\n                  children: [/*#__PURE__*/_jsxDEV(\"p\", {\n                    className: \"text-sm font-medium text-green-600\",\n                    children: processing.pricingType === 'percentage' ? `${(processing.price * 100).toFixed(0)}%` : `$${processing.price.toFixed(2)}`\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 310,\n                    columnNumber: 27\n                  }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n                    className: \"text-xs text-gray-500\",\n                    children: processing.pricingType.replace('_', ' ')\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 316,\n                    columnNumber: 27\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 309,\n                  columnNumber: 25\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 304,\n                columnNumber: 23\n              }, this)\n            }, processing.id, false, {\n              fileName: _jsxFileName,\n              lineNumber: 299,\n              columnNumber: 21\n            }, this))\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 297,\n            columnNumber: 17\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 295,\n          columnNumber: 15\n        }, this), availableProcessings.length === 0 && selectedItem.appliedProcessings.length === 0 && /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"text-center py-8\",\n          children: /*#__PURE__*/_jsxDEV(\"p\", {\n            className: \"text-gray-500\",\n            children: \"No processings available for this product type.\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 327,\n            columnNumber: 17\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 326,\n          columnNumber: 15\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 261,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 255,\n      columnNumber: 9\n    }, this), !selectedItem && /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"bg-white rounded-lg shadow p-8 text-center\",\n      children: /*#__PURE__*/_jsxDEV(\"p\", {\n        className: \"text-gray-500\",\n        children: \"Select a product from the table above to configure its processings.\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 336,\n        columnNumber: 11\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 335,\n      columnNumber: 9\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"bg-white rounded-lg shadow p-6\",\n      children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n        className: \"text-lg font-medium text-gray-900 mb-4\",\n        children: \"Quote Summary\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 342,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"space-y-2\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"flex justify-between\",\n          children: [/*#__PURE__*/_jsxDEV(\"span\", {\n            className: \"text-gray-600\",\n            children: \"Subtotal:\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 345,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n            className: \"font-medium\",\n            children: [\"$\", ((_quote$subtotal = quote.subtotal) === null || _quote$subtotal === void 0 ? void 0 : _quote$subtotal.toFixed(2)) || '0.00']\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 346,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 344,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"flex justify-between\",\n          children: [/*#__PURE__*/_jsxDEV(\"span\", {\n            className: \"text-gray-600\",\n            children: [\"Customer Discount (\", quote.customerDiscount, \"%):\"]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 349,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n            className: \"font-medium text-red-600\",\n            children: [\"-$\", ((quote.subtotal || 0) * (quote.customerDiscount / 100)).toFixed(2)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 350,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 348,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"flex justify-between\",\n          children: [/*#__PURE__*/_jsxDEV(\"span\", {\n            className: \"text-gray-600\",\n            children: \"Order Discount:\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 353,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n            className: \"font-medium text-red-600\",\n            children: [\"-$\", (quote.orderDiscount || 0).toFixed(2)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 354,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 352,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"border-t border-gray-200 pt-2\",\n          children: /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"flex justify-between text-lg font-semibold\",\n            children: [/*#__PURE__*/_jsxDEV(\"span\", {\n              children: \"Final Total:\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 358,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n              className: \"text-green-600\",\n              children: [\"$\", ((_quote$finalTotal = quote.finalTotal) === null || _quote$finalTotal === void 0 ? void 0 : _quote$finalTotal.toFixed(2)) || '0.00']\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 359,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 357,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 356,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 343,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 341,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 161,\n    columnNumber: 5\n  }, this);\n};\n_s(ImprovedProcessingManager, \"8gR68XDEV0ok0+tWS1uvA9OvtQg=\");\n_c = ImprovedProcessingManager;\nexport default ImprovedProcessingManager;\nvar _c;\n$RefreshReg$(_c, \"ImprovedProcessingManager\");","map":{"version":3,"names":["React","useState","jsxDEV","_jsxDEV","ImprovedProcessingManager","quote","rooms","products","processings","processingRules","productDependencies","onQuoteUpdate","_s","_quote$subtotal","_quote$finalTotal","selectedItemId","setSelectedItemId","getProduct","productId","find","p","id","getProcessing","processingId","getAvailableProcessings","currentProcessings","product","available","filter","proc","applicableProductCategories","includes","category","forEach","rule","type","conditions","processingIds","some","addProcessingToItem","itemId","processing","updatedItems","items","map","item","calculatedPrice","pricingType","basePrice","price","newProcessing","appliedDate","Date","toISOString","updatedItem","appliedProcessings","processingTotal","reduce","sum","ap","totalPrice","quantity","recalculateQuote","removeProcessingFromItem","updateQuantity","newQuantity","removeItem","updatedQuote","subtotal","customerDiscount","orderDiscount","totalDiscount","finalTotal","finalQuote","selectedItem","selectedProduct","availableProcessings","className","children","length","fileName","_jsxFileName","lineNumber","columnNumber","isSelected","onClick","name","description","min","value","onChange","e","parseInt","target","stopPropagation","toFixed","replace","_c","$RefreshReg$"],"sources":["/Users/dkjesuschua/Documents/demo_cpq/src/components/ImprovedProcessingManager.tsx"],"sourcesContent":["import React, { useState } from 'react';\nimport { Quote, Product, Processing, ProcessingRule, ProductDependency, Room } from '../types';\n\ninterface ImprovedProcessingManagerProps {\n  quote: Quote;\n  rooms: Room[];\n  products: Product[];\n  processings: Processing[];\n  processingRules: ProcessingRule[];\n  productDependencies: ProductDependency[];\n  onQuoteUpdate: (quote: Quote) => void;\n}\n\nconst ImprovedProcessingManager: React.FC<ImprovedProcessingManagerProps> = ({\n  quote,\n  rooms,\n  products,\n  processings,\n  processingRules,\n  productDependencies,\n  onQuoteUpdate\n}) => {\n  const [selectedItemId, setSelectedItemId] = useState<string | null>(null);\n  const getProduct = (productId: string) => products.find(p => p.id === productId);\n  const getProcessing = (processingId: string) => processings.find(p => p.id === processingId);\n\n  const getAvailableProcessings = (productId: string, currentProcessings: string[]) => {\n    const product = getProduct(productId);\n    if (!product) return [];\n\n    let available = processings.filter(proc => \n      proc.applicableProductCategories.includes(product.category)\n    );\n\n    // Apply processing rules for mutual exclusions\n    processingRules.forEach(rule => {\n      if (rule.type === 'mutual_exclusion' && rule.conditions.processingIds && \n          currentProcessings.some(id => rule.conditions.processingIds!.includes(id))) {\n        available = available.filter(proc => \n          !rule.conditions.processingIds!.includes(proc.id) || currentProcessings.includes(proc.id));\n      }\n    });\n\n    // Remove already applied processings\n    available = available.filter(proc => !currentProcessings.includes(proc.id));\n\n    return available;\n  };\n\n  const addProcessingToItem = (itemId: string, processingId: string) => {\n    const processing = getProcessing(processingId);\n    if (!processing) return;\n\n    const updatedItems = quote.items.map(item => {\n      if (item.id === itemId) {\n        const product = getProduct(item.productId);\n        if (!product) return item;\n\n        let calculatedPrice = 0;\n        if (processing.pricingType === 'percentage') {\n          calculatedPrice = product.basePrice * processing.price;\n        } else {\n          calculatedPrice = processing.price;\n        }\n\n        const newProcessing = {\n          processingId,\n          calculatedPrice,\n          appliedDate: new Date().toISOString()\n        };\n\n        const updatedItem = {\n          ...item,\n          appliedProcessings: [...item.appliedProcessings, newProcessing]\n        };\n\n        // Recalculate total price\n        const processingTotal = updatedItem.appliedProcessings.reduce((sum: number, ap: any) => sum + ap.calculatedPrice, 0);\n        updatedItem.totalPrice = (product.basePrice + processingTotal) * item.quantity;\n\n        return updatedItem;\n      }\n      return item;\n    });\n\n    recalculateQuote({ ...quote, items: updatedItems });\n  };\n\n  const removeProcessingFromItem = (itemId: string, processingId: string) => {\n    const updatedItems = quote.items.map(item => {\n      if (item.id === itemId) {\n        const product = getProduct(item.productId);\n        if (!product) return item;\n\n        const updatedItem = {\n          ...item,\n          appliedProcessings: item.appliedProcessings.filter((ap: any) => ap.processingId !== processingId)\n        };\n\n        // Recalculate total price\n        const processingTotal = updatedItem.appliedProcessings.reduce((sum: number, ap: any) => sum + ap.calculatedPrice, 0);\n        updatedItem.totalPrice = (product.basePrice + processingTotal) * item.quantity;\n\n        return updatedItem;\n      }\n      return item;\n    });\n\n    recalculateQuote({ ...quote, items: updatedItems });\n  };\n\n  const updateQuantity = (itemId: string, newQuantity: number) => {\n    const updatedItems = quote.items.map(item => {\n      if (item.id === itemId) {\n        const product = getProduct(item.productId);\n        if (!product) return item;\n\n        const updatedItem = { ...item, quantity: newQuantity };\n        const processingTotal = updatedItem.appliedProcessings.reduce((sum: number, ap: any) => sum + ap.calculatedPrice, 0);\n        updatedItem.totalPrice = (product.basePrice + processingTotal) * newQuantity;\n\n        return updatedItem;\n      }\n      return item;\n    });\n\n    recalculateQuote({ ...quote, items: updatedItems });\n  };\n\n  const removeItem = (itemId: string) => {\n    const updatedItems = quote.items.filter(item => item.id !== itemId);\n    recalculateQuote({ ...quote, items: updatedItems });\n    if (selectedItemId === itemId) {\n      setSelectedItemId(null);\n    }\n  };\n\n  const recalculateQuote = (updatedQuote: Quote) => {\n    const subtotal = updatedQuote.items.reduce((sum, item) => sum + item.totalPrice, 0);\n    const customerDiscount = subtotal * (updatedQuote.customerDiscount / 100);\n    const orderDiscount = updatedQuote.orderDiscount || 0;\n    const totalDiscount = customerDiscount + orderDiscount;\n    const finalTotal = subtotal - totalDiscount;\n\n    const finalQuote = {\n      ...updatedQuote,\n      orderDiscount,\n      subtotal,\n      totalDiscount,\n      finalTotal\n    };\n\n    onQuoteUpdate(finalQuote);\n  };\n\n  const selectedItem = selectedItemId ? quote.items.find(item => item.id === selectedItemId) : null;\n  const selectedProduct = selectedItem ? getProduct(selectedItem.productId) : null;\n  const availableProcessings = selectedItem ? getAvailableProcessings(selectedItem.productId, selectedItem.appliedProcessings.map((ap: any) => ap.processingId)) : [];\n\n  return (\n    <div className=\"space-y-6\">\n      {/* Product Overview Table */}\n      <div className=\"bg-white rounded-lg shadow\">\n        <div className=\"p-4 border-b border-gray-200\">\n          <h3 className=\"text-lg font-medium text-gray-900\">Quote Items ({quote.items.length})</h3>\n          <p className=\"text-sm text-gray-600\">Click on a product to configure its processings</p>\n        </div>\n        \n        <div className=\"overflow-x-auto\">\n          <table className=\"min-w-full divide-y divide-gray-200\">\n            <thead className=\"bg-gray-50\">\n              <tr>\n                <th className=\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\">Product</th>\n                <th className=\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\">Qty</th>\n                <th className=\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\">Processings</th>\n                <th className=\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\">Price</th>\n                <th className=\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\">Actions</th>\n              </tr>\n            </thead>\n            <tbody className=\"bg-white divide-y divide-gray-200\">\n              {quote.items.map((item) => {\n                const product = getProduct(item.productId);\n                const isSelected = selectedItemId === item.id;\n                \n                return (\n                  <tr \n                    key={item.id} \n                    className={`hover:bg-gray-50 cursor-pointer ${isSelected ? 'bg-blue-50 border-l-4 border-blue-500' : ''}`}\n                    onClick={() => setSelectedItemId(item.id)}\n                  >\n                    <td className=\"px-6 py-4 whitespace-nowrap\">\n                      <div>\n                        <div className=\"text-sm font-medium text-gray-900\">{product?.name}</div>\n                        <div className=\"text-sm text-gray-500\">{product?.description}</div>\n                      </div>\n                    </td>\n                    <td className=\"px-6 py-4 whitespace-nowrap\">\n                      <input\n                        type=\"number\"\n                        min=\"1\"\n                        value={item.quantity}\n                        onChange={(e) => updateQuantity(item.id, parseInt(e.target.value) || 1)}\n                        className=\"w-16 px-2 py-1 border border-gray-300 rounded text-center\"\n                        onClick={(e) => e.stopPropagation()}\n                      />\n                    </td>\n                    <td className=\"px-6 py-4\">\n                      <div className=\"flex flex-wrap gap-1\">\n                        {item.appliedProcessings.map((ap: any) => {\n                          const processing = getProcessing(ap.processingId);\n                          return (\n                            <span key={ap.processingId} className=\"inline-flex items-center px-2 py-1 rounded-full text-xs font-medium bg-blue-100 text-blue-800\">\n                              {processing?.name}\n                              <button\n                                onClick={(e) => {\n                                  e.stopPropagation();\n                                  removeProcessingFromItem(item.id, ap.processingId);\n                                }}\n                                className=\"ml-1 text-blue-600 hover:text-blue-800\"\n                              >\n                                Ã—\n                              </button>\n                            </span>\n                          );\n                        })}\n                        {item.appliedProcessings.length === 0 && (\n                          <span className=\"text-sm text-gray-400\">No processings</span>\n                        )}\n                      </div>\n                    </td>\n                    <td className=\"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900\">\n                      ${item.totalPrice.toFixed(2)}\n                    </td>\n                    <td className=\"px-6 py-4 whitespace-nowrap\">\n                      <button\n                        onClick={(e) => {\n                          e.stopPropagation();\n                          removeItem(item.id);\n                        }}\n                        className=\"text-red-600 hover:text-red-800\"\n                      >\n                        Remove\n                      </button>\n                    </td>\n                  </tr>\n                );\n              })}\n            </tbody>\n          </table>\n        </div>\n      </div>\n\n      {/* Processing Configuration Panel */}\n      {selectedItem && selectedProduct && (\n        <div className=\"bg-white rounded-lg shadow\">\n          <div className=\"p-4 border-b border-gray-200 bg-blue-50\">\n            <h3 className=\"text-lg font-medium text-gray-900\">Configure: {selectedProduct.name}</h3>\n            <p className=\"text-sm text-gray-600\">Add processings to customize this product</p>\n          </div>\n          \n          <div className=\"p-6\">\n            {/* Applied Processings */}\n            {selectedItem.appliedProcessings.length > 0 && (\n              <div className=\"mb-6\">\n                <h4 className=\"text-sm font-medium text-gray-700 mb-3\">Applied Processings</h4>\n                <div className=\"space-y-2\">\n                  {selectedItem.appliedProcessings.map((ap: any) => {\n                    const processing = getProcessing(ap.processingId);\n                    return (\n                      <div key={ap.processingId} className=\"flex justify-between items-center bg-green-50 px-4 py-3 rounded-lg border border-green-200\">\n                        <div>\n                          <span className=\"text-sm font-medium text-green-900\">{processing?.name}</span>\n                          <span className=\"text-xs text-green-700 ml-2\">{processing?.description}</span>\n                        </div>\n                        <div className=\"flex items-center space-x-3\">\n                          <span className=\"text-sm font-medium text-green-900\">\n                            +${ap.calculatedPrice.toFixed(2)}\n                          </span>\n                          <button\n                            onClick={() => removeProcessingFromItem(selectedItem.id, ap.processingId)}\n                            className=\"text-red-600 hover:text-red-800 text-sm px-2 py-1 rounded hover:bg-red-50\"\n                          >\n                            Remove\n                          </button>\n                        </div>\n                      </div>\n                    );\n                  })}\n                </div>\n              </div>\n            )}\n\n            {/* Available Processings */}\n            {availableProcessings.length > 0 && (\n              <div>\n                <h4 className=\"text-sm font-medium text-gray-700 mb-3\">Available Processings</h4>\n                <div className=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4\">\n                  {availableProcessings.map((processing) => (\n                    <button\n                      key={processing.id}\n                      onClick={() => addProcessingToItem(selectedItem.id, processing.id)}\n                      className=\"text-left p-4 border border-gray-200 rounded-lg hover:border-blue-300 hover:bg-blue-50 transition-colors\"\n                    >\n                      <div className=\"flex justify-between items-start\">\n                        <div>\n                          <h5 className=\"text-sm font-medium text-gray-900\">{processing.name}</h5>\n                          <p className=\"text-xs text-gray-600 mt-1\">{processing.description}</p>\n                        </div>\n                        <div className=\"text-right ml-2\">\n                          <p className=\"text-sm font-medium text-green-600\">\n                            {processing.pricingType === 'percentage' \n                              ? `${(processing.price * 100).toFixed(0)}%`\n                              : `$${processing.price.toFixed(2)}`\n                            }\n                          </p>\n                          <p className=\"text-xs text-gray-500\">{processing.pricingType.replace('_', ' ')}</p>\n                        </div>\n                      </div>\n                    </button>\n                  ))}\n                </div>\n              </div>\n            )}\n\n            {availableProcessings.length === 0 && selectedItem.appliedProcessings.length === 0 && (\n              <div className=\"text-center py-8\">\n                <p className=\"text-gray-500\">No processings available for this product type.</p>\n              </div>\n            )}\n          </div>\n        </div>\n      )}\n\n      {!selectedItem && (\n        <div className=\"bg-white rounded-lg shadow p-8 text-center\">\n          <p className=\"text-gray-500\">Select a product from the table above to configure its processings.</p>\n        </div>\n      )}\n\n      {/* Quote Summary */}\n      <div className=\"bg-white rounded-lg shadow p-6\">\n        <h3 className=\"text-lg font-medium text-gray-900 mb-4\">Quote Summary</h3>\n        <div className=\"space-y-2\">\n          <div className=\"flex justify-between\">\n            <span className=\"text-gray-600\">Subtotal:</span>\n            <span className=\"font-medium\">${quote.subtotal?.toFixed(2) || '0.00'}</span>\n          </div>\n          <div className=\"flex justify-between\">\n            <span className=\"text-gray-600\">Customer Discount ({quote.customerDiscount}%):</span>\n            <span className=\"font-medium text-red-600\">-${((quote.subtotal || 0) * (quote.customerDiscount / 100)).toFixed(2)}</span>\n          </div>\n          <div className=\"flex justify-between\">\n            <span className=\"text-gray-600\">Order Discount:</span>\n            <span className=\"font-medium text-red-600\">-${(quote.orderDiscount || 0).toFixed(2)}</span>\n          </div>\n          <div className=\"border-t border-gray-200 pt-2\">\n            <div className=\"flex justify-between text-lg font-semibold\">\n              <span>Final Total:</span>\n              <span className=\"text-green-600\">${quote.finalTotal?.toFixed(2) || '0.00'}</span>\n            </div>\n          </div>\n        </div>\n      </div>\n    </div>\n  );\n};\n\nexport default ImprovedProcessingManager;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}