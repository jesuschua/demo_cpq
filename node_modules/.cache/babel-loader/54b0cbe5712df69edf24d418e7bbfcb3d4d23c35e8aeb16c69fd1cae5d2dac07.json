{"ast":null,"code":"var _jsxFileName = \"/Users/dkjesuschua/Documents/demo_cpq/src/ImprovedApp.tsx\",\n  _s = $RefreshSig$();\nimport React, { useState, useEffect } from 'react';\nimport { customers, models, products, processings, processingRules, productDependencies } from './data/sampleData';\nimport MinimalDashboard from './components/MinimalDashboard';\nimport CustomerSelector from './components/CustomerSelector';\nimport EnhancedRoomManager from './components/EnhancedRoomManager';\nimport CleanProductCatalog from './components/CleanProductCatalog';\nimport LiveProcessingProductManager from './components/LiveProcessingProductManager';\n\n// Define the 4 clear phases\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nfunction ImprovedApp() {\n  _s();\n  var _workflow$customer, _workflow$room2, _models$find, _workflow$room4, _models$find2, _models$find3;\n  const [currentView, setCurrentView] = useState('dashboard');\n  const [workflow, setWorkflow] = useState({\n    currentPhase: 'customer_config',\n    customer: null,\n    room: null,\n    products: [],\n    quote: null,\n    savedStates: {}\n  });\n\n  // Phase progression with validation\n  const canProceedToNextPhase = () => {\n    switch (workflow.currentPhase) {\n      case 'customer_config':\n        return workflow.customer !== null;\n      case 'room_config':\n        return workflow.room !== null;\n      case 'product_config':\n        return workflow.products.length > 0;\n      case 'quote_finalize':\n        return workflow.quote !== null;\n      default:\n        return false;\n    }\n  };\n  const proceedToNextPhase = () => {\n    const phaseOrder = ['customer_config', 'room_config', 'product_config', 'quote_finalize'];\n    const currentIndex = phaseOrder.indexOf(workflow.currentPhase);\n    if (currentIndex < phaseOrder.length - 1 && canProceedToNextPhase()) {\n      const nextPhase = phaseOrder[currentIndex + 1];\n\n      // Auto-create quote when moving to product config\n      if (nextPhase === 'product_config' && !workflow.quote) {\n        createQuoteFromCurrentState();\n      }\n\n      // Update quote when moving to quote finalization\n      if (nextPhase === 'quote_finalize') {\n        createQuoteFromCurrentState();\n      }\n      setWorkflow(prev => ({\n        ...prev,\n        currentPhase: nextPhase,\n        savedStates: {\n          ...prev.savedStates,\n          [prev.currentPhase]: getCurrentPhaseData()\n        }\n      }));\n    }\n  };\n  const goToPreviousPhase = () => {\n    const phaseOrder = ['customer_config', 'room_config', 'product_config', 'quote_finalize'];\n    const currentIndex = phaseOrder.indexOf(workflow.currentPhase);\n    if (currentIndex > 0) {\n      const prevPhase = phaseOrder[currentIndex - 1];\n      setWorkflow(prev => ({\n        ...prev,\n        currentPhase: prevPhase\n      }));\n    }\n  };\n  const getCurrentPhaseData = () => {\n    switch (workflow.currentPhase) {\n      case 'customer_config':\n        return workflow.customer;\n      case 'room_config':\n        return workflow.room;\n      case 'product_config':\n        return workflow.products;\n      case 'quote_finalize':\n        return workflow.quote;\n      default:\n        return null;\n    }\n  };\n\n  // Save current phase state\n  const saveCurrentPhase = () => {\n    const currentData = getCurrentPhaseData();\n    setWorkflow(prev => ({\n      ...prev,\n      savedStates: {\n        ...prev.savedStates,\n        [prev.currentPhase]: currentData\n      }\n    }));\n\n    // Show save confirmation\n    const phaseNames = {\n      customer_config: 'Customer Configuration',\n      room_config: 'Room Configuration',\n      product_config: 'Product Configuration',\n      quote_finalize: 'Quote'\n    };\n    alert(`${phaseNames[workflow.currentPhase]} saved successfully!`);\n  };\n\n  // Create quote from current state\n  const createQuoteFromCurrentState = () => {\n    if (!workflow.customer || !workflow.room) return;\n    const newQuote = {\n      id: Date.now().toString(),\n      customerId: workflow.customer.id,\n      rooms: [workflow.room],\n      items: workflow.products,\n      contractDiscount: 0,\n      customerDiscount: workflow.customer.discountPercentage || 0,\n      orderDiscount: 0,\n      subtotal: 0,\n      totalDiscount: 0,\n      finalTotal: 0,\n      status: 'draft',\n      createdAt: new Date(),\n      expiresAt: new Date(Date.now() + 30 * 24 * 60 * 60 * 1000),\n      requiresApproval: false,\n      approvalThreshold: 5000\n    };\n    const updatedQuote = recalculateQuote(newQuote);\n    setWorkflow(prev => ({\n      ...prev,\n      quote: updatedQuote\n    }));\n  };\n\n  // Recalculate quote totals\n  const recalculateQuote = quote => {\n    const subtotal = quote.items.reduce((sum, item) => sum + item.totalPrice, 0);\n    const customerDiscount = subtotal * (quote.customerDiscount / 100);\n    const totalDiscount = customerDiscount + quote.orderDiscount;\n    const finalTotal = subtotal - totalDiscount;\n    return {\n      ...quote,\n      subtotal,\n      totalDiscount,\n      finalTotal,\n      requiresApproval: finalTotal > quote.approvalThreshold\n    };\n  };\n\n  // Cascading updates when stepping back\n  useEffect(() => {\n    // If customer changes, clear room and products\n    if (workflow.currentPhase === 'customer_config' && workflow.room) {\n      setWorkflow(prev => ({\n        ...prev,\n        room: null,\n        products: [],\n        quote: null\n      }));\n    }\n\n    // If room changes, clear products that don't match the new room's model\n    if (workflow.currentPhase === 'room_config' && workflow.room && workflow.products.length > 0) {\n      const roomModel = models.find(m => {\n        var _workflow$room;\n        return m.id === ((_workflow$room = workflow.room) === null || _workflow$room === void 0 ? void 0 : _workflow$room.frontModelId);\n      });\n      if (roomModel) {\n        const compatibleProducts = workflow.products.filter(item => {\n          const product = products.find(p => p.id === item.productId);\n          return (product === null || product === void 0 ? void 0 : product.modelId) === roomModel.id;\n        });\n        if (compatibleProducts.length !== workflow.products.length) {\n          setWorkflow(prev => ({\n            ...prev,\n            products: compatibleProducts,\n            quote: null // Clear quote to force recalculation\n          }));\n        }\n      }\n    }\n  }, [workflow.customer, workflow.room, workflow.currentPhase, workflow.products]);\n\n  // Phase-specific handlers\n  const handleCustomerSelect = customer => {\n    setWorkflow(prev => ({\n      ...prev,\n      customer\n    }));\n  };\n  const handleRoomCreate = room => {\n    setWorkflow(prev => ({\n      ...prev,\n      room\n    }));\n  };\n  const handleProductAdd = (productId, quantity = 1) => {\n    if (!workflow.room) return;\n    const product = products.find(p => p.id === productId);\n    if (!product) return;\n\n    // Apply room-level inherited processings\n    const inheritedProcessings = workflow.room.activatedProcessings.map(processingId => {\n      const processing = processings.find(p => p.id === processingId);\n      if (!processing) return null;\n\n      // Check if this processing is applicable to this product category\n      if (!processing.applicableProductCategories.includes(product.category)) {\n        return null;\n      }\n\n      // Calculate processing price\n      let calculatedPrice = 0;\n      if (processing.pricingType === 'percentage') {\n        calculatedPrice = product.basePrice * processing.price;\n      } else if (processing.pricingType === 'per_unit') {\n        calculatedPrice = processing.price;\n      } else if (processing.pricingType === 'per_dimension' && product.dimensions) {\n        // Simple calculation for per_dimension - could be enhanced with actual formula parsing\n        calculatedPrice = processing.price * (product.dimensions.width || 1);\n      }\n      return {\n        processingId,\n        calculatedPrice,\n        isInherited: true,\n        appliedDate: new Date().toISOString()\n      };\n    }).filter(Boolean);\n\n    // Calculate total price with inherited processings\n    const processingTotal = inheritedProcessings.reduce((sum, ap) => sum + ap.calculatedPrice, 0);\n    const totalPrice = (product.basePrice + processingTotal) * quantity;\n    const newItem = {\n      id: Date.now().toString(),\n      productId,\n      roomId: workflow.room.id,\n      quantity,\n      appliedProcessings: inheritedProcessings,\n      basePrice: product.basePrice,\n      totalPrice\n    };\n    setWorkflow(prev => ({\n      ...prev,\n      products: [...prev.products, newItem]\n    }));\n  };\n  const handleQuoteUpdate = updatedQuote => {\n    setWorkflow(prev => ({\n      ...prev,\n      quote: updatedQuote\n    }));\n  };\n\n  // Remove product from workflow\n  const removeProduct = productId => {\n    setWorkflow(prev => ({\n      ...prev,\n      products: prev.products.filter(item => item.productId !== productId)\n    }));\n  };\n  const adjustProductQuantity = (productId, change) => {\n    setWorkflow(prev => ({\n      ...prev,\n      products: prev.products.map(item => {\n        if (item.productId === productId) {\n          const newQuantity = item.quantity + change;\n          return {\n            ...item,\n            quantity: newQuantity\n          };\n        }\n        return item;\n      }).filter(item => item.quantity > 0) // Remove items with 0 or negative quantity\n    }));\n  };\n\n  // Print quote\n  const printQuote = () => {\n    try {\n      window.print();\n    } catch (error) {\n      console.error('Print failed:', error);\n      alert('Print functionality is not available in this browser.');\n    }\n  };\n\n  // Dashboard handlers\n  const handleStartNewQuote = customer => {\n    setWorkflow({\n      currentPhase: 'room_config',\n      // Skip customer selection, go directly to room\n      customer,\n      room: null,\n      products: [],\n      quote: null,\n      savedStates: {}\n    });\n    setCurrentView('workflow');\n  };\n  const handleEditQuote = quote => {\n    const customer = customers.find(c => c.id === quote.customerId);\n    if (customer && quote.rooms.length > 0) {\n      setWorkflow({\n        currentPhase: 'quote_finalize',\n        customer,\n        room: quote.rooms[0],\n        products: quote.items,\n        quote,\n        savedStates: {}\n      });\n      setCurrentView('workflow');\n    }\n  };\n  const handleReturnToDashboard = () => {\n    setCurrentView('dashboard');\n    // Reset workflow when returning to dashboard\n    setWorkflow({\n      currentPhase: 'customer_config',\n      customer: null,\n      room: null,\n      products: [],\n      quote: null,\n      savedStates: {}\n    });\n  };\n  const handleSaveQuote = () => {\n    console.log('handleSaveQuote called');\n    console.log('workflow.quote:', workflow.quote);\n    if (workflow.quote) {\n      // Ensure quote has all required properties\n      const quoteToSave = {\n        ...workflow.quote,\n        id: workflow.quote.id || Date.now().toString(),\n        quoteNumber: workflow.quote.quoteNumber || `QUOTE-${Date.now()}`,\n        savedAt: new Date(),\n        status: workflow.quote.status || 'draft'\n      };\n      console.log('Saving quote:', quoteToSave);\n\n      // Save to localStorage\n      const existingQuotes = JSON.parse(localStorage.getItem('savedQuotes') || '[]');\n      const updatedQuotes = [...existingQuotes.filter(q => q.id !== quoteToSave.id), quoteToSave];\n      localStorage.setItem('savedQuotes', JSON.stringify(updatedQuotes));\n      console.log('Quotes after save:', updatedQuotes.length);\n      alert('Quote saved successfully!');\n      handleReturnToDashboard();\n    } else {\n      console.log('No quote to save - workflow.quote is null');\n      // Try to create quote if it doesn't exist\n      if (workflow.customer && workflow.room && workflow.products.length > 0) {\n        console.log('Creating quote before saving...');\n        createQuoteFromCurrentState();\n\n        // Retry save after creating quote\n        setTimeout(() => {\n          if (workflow.quote) {\n            handleSaveQuote();\n          } else {\n            alert('Error: Unable to create quote for saving');\n          }\n        }, 100);\n      } else {\n        alert('Error: Quote cannot be saved - missing required data');\n      }\n    }\n  };\n  const resetWorkflow = () => {\n    setWorkflow({\n      currentPhase: 'customer_config',\n      customer: null,\n      room: null,\n      products: [],\n      quote: null,\n      savedStates: {}\n    });\n  };\n\n  // Get the current room's model\n  const getCurrentRoomModel = () => {\n    if (!workflow.room) return null;\n    return models.find(m => m.id === workflow.room.frontModelId) || null;\n  };\n\n  // Phase titles and descriptions\n  const phaseInfo = {\n    customer_config: {\n      title: 'Phase 1: Customer Configuration',\n      description: 'Select and configure customer details'\n    },\n    room_config: {\n      title: 'Phase 2: Room Configuration',\n      description: 'Create room and select styling preferences'\n    },\n    product_config: {\n      title: 'Phase 3: Product Configuration',\n      description: 'Select products that inherit room styling'\n    },\n    quote_finalize: {\n      title: 'Phase 4: Quote Finalization',\n      description: 'Review, adjust discounts, and finalize quote'\n    }\n  };\n\n  // Dashboard view\n  if (currentView === 'dashboard') {\n    return /*#__PURE__*/_jsxDEV(MinimalDashboard, {\n      customers: customers,\n      onStartNewQuote: handleStartNewQuote,\n      onEditQuote: handleEditQuote\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 415,\n      columnNumber: 7\n    }, this);\n  }\n\n  // Workflow view\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"min-h-screen bg-gray-50 pb-20\",\n    children: [/*#__PURE__*/_jsxDEV(\"header\", {\n      className: \"bg-white shadow-sm border-b border-gray-200\",\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8\",\n        children: /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"flex justify-between items-center h-16\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"flex items-center\",\n            children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n              className: \"text-2xl font-bold text-gray-900\",\n              children: \"Kitchen CPQ\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 431,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n              className: \"ml-4 text-sm text-gray-500\",\n              children: \"Improved Workflow\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 432,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 430,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"flex items-center space-x-2\",\n            children: ['customer_config', 'room_config', 'product_config', 'quote_finalize'].map((phase, index) => {\n              const phaseNames = ['Customer', 'Room', 'Products', 'Quote'];\n              const isActive = workflow.currentPhase === phase;\n              const isCompleted = ['customer_config', 'room_config', 'product_config', 'quote_finalize'].indexOf(workflow.currentPhase) > index;\n              return /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"flex items-center\",\n                children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                  className: `w-8 h-8 rounded-full flex items-center justify-center text-sm font-medium ${isActive ? 'bg-blue-600 text-white' : isCompleted ? 'bg-green-600 text-white' : 'bg-gray-300 text-gray-600'}`,\n                  children: index + 1\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 444,\n                  columnNumber: 21\n                }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                  className: `ml-2 text-sm ${isActive ? 'text-blue-600 font-medium' : 'text-gray-500'}`,\n                  children: phaseNames[index]\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 451,\n                  columnNumber: 21\n                }, this), index < 3 && /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"w-8 h-0.5 bg-gray-300 mx-3\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 454,\n                  columnNumber: 35\n                }, this)]\n              }, phase, true, {\n                fileName: _jsxFileName,\n                lineNumber: 443,\n                columnNumber: 19\n              }, this);\n            })\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 436,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"text-right\",\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"text-sm font-medium text-gray-900\",\n              children: phaseInfo[workflow.currentPhase].title\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 462,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"text-xs text-gray-500\",\n              children: phaseInfo[workflow.currentPhase].description\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 465,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 461,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 429,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 428,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 427,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"main\", {\n      className: \"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"flex gap-6\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"flex-1\",\n          children: [workflow.currentPhase === 'customer_config' && /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"max-w-4xl mx-auto\",\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"text-center mb-8\",\n              children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n                className: \"text-3xl font-bold text-gray-900 mb-2\",\n                children: \"Select Customer\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 483,\n                columnNumber: 15\n              }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n                className: \"text-gray-600\",\n                children: \"Select customer to start quote process\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 484,\n                columnNumber: 15\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 482,\n              columnNumber: 13\n            }, this), /*#__PURE__*/_jsxDEV(CustomerSelector, {\n              customers: customers,\n              contracts: [],\n              onCustomerSelect: handleCustomerSelect\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 487,\n              columnNumber: 13\n            }, this), workflow.customer && /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"mt-6 bg-green-50 border border-green-200 rounded-lg p-4\",\n              children: /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"flex items-center justify-between\",\n                children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                  children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n                    className: \"text-lg font-medium text-green-900\",\n                    children: [\"Customer Selected: \", workflow.customer.name]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 497,\n                    columnNumber: 21\n                  }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n                    className: \"text-sm text-green-700\",\n                    children: [\"Customer Discount: \", workflow.customer.discountPercentage, \"%\"]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 500,\n                    columnNumber: 21\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 496,\n                  columnNumber: 19\n                }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"flex space-x-3\",\n                  children: [/*#__PURE__*/_jsxDEV(\"button\", {\n                    onClick: saveCurrentPhase,\n                    className: \"bg-blue-600 hover:bg-blue-700 text-white px-4 py-2 rounded-md text-sm\",\n                    children: \"Save Customer\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 505,\n                    columnNumber: 21\n                  }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n                    onClick: proceedToNextPhase,\n                    className: \"bg-green-600 hover:bg-green-700 text-white px-4 py-2 rounded-md text-sm\",\n                    children: \"Proceed to Room Setup \\u2192\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 511,\n                    columnNumber: 21\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 504,\n                  columnNumber: 19\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 495,\n                columnNumber: 17\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 494,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 481,\n            columnNumber: 11\n          }, this), workflow.currentPhase === 'room_config' && /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"max-w-4xl mx-auto\",\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"text-center mb-8\",\n              children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n                className: \"text-3xl font-bold text-gray-900 mb-2\",\n                children: \"Configure Room\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 528,\n                columnNumber: 15\n              }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n                className: \"text-gray-600\",\n                children: [\"Customer: \", /*#__PURE__*/_jsxDEV(\"span\", {\n                  className: \"font-medium\",\n                  children: (_workflow$customer = workflow.customer) === null || _workflow$customer === void 0 ? void 0 : _workflow$customer.name\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 530,\n                  columnNumber: 27\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 529,\n                columnNumber: 15\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 527,\n              columnNumber: 13\n            }, this), /*#__PURE__*/_jsxDEV(EnhancedRoomManager, {\n              models: models,\n              processings: processings,\n              onCreateQuote: handleRoomCreate,\n              existingRooms: workflow.room ? [workflow.room] : [],\n              onAddRoom: handleRoomCreate\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 534,\n              columnNumber: 13\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"mt-6 flex justify-between\",\n              children: [/*#__PURE__*/_jsxDEV(\"button\", {\n                onClick: goToPreviousPhase,\n                className: \"bg-gray-600 hover:bg-gray-700 text-white px-4 py-2 rounded-md\",\n                children: \"\\u2190 Back to Customer\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 543,\n                columnNumber: 15\n              }, this), workflow.room && /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"flex space-x-3\",\n                children: [/*#__PURE__*/_jsxDEV(\"button\", {\n                  onClick: saveCurrentPhase,\n                  className: \"bg-blue-600 hover:bg-blue-700 text-white px-4 py-2 rounded-md\",\n                  children: \"Save Room Config\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 552,\n                  columnNumber: 19\n                }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n                  onClick: proceedToNextPhase,\n                  className: \"bg-green-600 hover:bg-green-700 text-white px-4 py-2 rounded-md\",\n                  children: \"Proceed to Products \\u2192\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 558,\n                  columnNumber: 19\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 551,\n                columnNumber: 17\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 542,\n              columnNumber: 13\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 526,\n            columnNumber: 11\n          }, this), workflow.currentPhase === 'product_config' && workflow.room && /*#__PURE__*/_jsxDEV(\"div\", {\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"text-center mb-8\",\n              children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n                className: \"text-3xl font-bold text-gray-900 mb-2\",\n                children: \"Configure Products\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 574,\n                columnNumber: 15\n              }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n                className: \"text-gray-600\",\n                children: [\"Room: \", /*#__PURE__*/_jsxDEV(\"span\", {\n                  className: \"font-medium\",\n                  children: (_workflow$room2 = workflow.room) === null || _workflow$room2 === void 0 ? void 0 : _workflow$room2.name\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 576,\n                  columnNumber: 23\n                }, this), \" | Front Model: \", /*#__PURE__*/_jsxDEV(\"span\", {\n                  className: \"font-medium\",\n                  children: (_models$find = models.find(m => {\n                    var _workflow$room3;\n                    return m.id === ((_workflow$room3 = workflow.room) === null || _workflow$room3 === void 0 ? void 0 : _workflow$room3.frontModelId);\n                  })) === null || _models$find === void 0 ? void 0 : _models$find.name\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 577,\n                  columnNumber: 30\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 575,\n                columnNumber: 15\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 573,\n              columnNumber: 13\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"grid grid-cols-1 lg:grid-cols-3 gap-6\",\n              children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"lg:col-span-2\",\n                children: /*#__PURE__*/_jsxDEV(CleanProductCatalog, {\n                  models: models // Pass all models\n                  ,\n                  products: products,\n                  selectedModel: getCurrentRoomModel(),\n                  onModelSelect: () => {} // Disabled in improved workflow\n                  ,\n                  onProductSelect: (product, quantity) => handleProductAdd(product.id, quantity),\n                  hasQuote: true,\n                  onCreateQuote: () => {}\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 583,\n                  columnNumber: 17\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 582,\n                columnNumber: 15\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"space-y-6\",\n                children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"bg-white rounded-lg shadow p-6\",\n                  children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n                    className: \"text-lg font-semibold text-gray-900 mb-4\",\n                    children: \"Room Configuration\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 596,\n                    columnNumber: 19\n                  }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                    className: \"space-y-2 text-sm\",\n                    children: [/*#__PURE__*/_jsxDEV(\"p\", {\n                      children: [/*#__PURE__*/_jsxDEV(\"span\", {\n                        className: \"text-gray-600\",\n                        children: \"Room:\"\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 598,\n                        columnNumber: 24\n                      }, this), \" \", /*#__PURE__*/_jsxDEV(\"span\", {\n                        className: \"font-medium\",\n                        children: (_workflow$room4 = workflow.room) === null || _workflow$room4 === void 0 ? void 0 : _workflow$room4.name\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 598,\n                        columnNumber: 69\n                      }, this)]\n                    }, void 0, true, {\n                      fileName: _jsxFileName,\n                      lineNumber: 598,\n                      columnNumber: 21\n                    }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n                      children: [/*#__PURE__*/_jsxDEV(\"span\", {\n                        className: \"text-gray-600\",\n                        children: \"Front Model:\"\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 599,\n                        columnNumber: 24\n                      }, this), \" \", /*#__PURE__*/_jsxDEV(\"span\", {\n                        className: \"font-medium\",\n                        children: (_models$find2 = models.find(m => {\n                          var _workflow$room5;\n                          return m.id === ((_workflow$room5 = workflow.room) === null || _workflow$room5 === void 0 ? void 0 : _workflow$room5.frontModelId);\n                        })) === null || _models$find2 === void 0 ? void 0 : _models$find2.name\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 599,\n                        columnNumber: 76\n                      }, this)]\n                    }, void 0, true, {\n                      fileName: _jsxFileName,\n                      lineNumber: 599,\n                      columnNumber: 21\n                    }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n                      children: [/*#__PURE__*/_jsxDEV(\"span\", {\n                        className: \"text-gray-600\",\n                        children: \"Style:\"\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 600,\n                        columnNumber: 24\n                      }, this), \" \", /*#__PURE__*/_jsxDEV(\"span\", {\n                        className: \"font-medium capitalize\",\n                        children: (_models$find3 = models.find(m => {\n                          var _workflow$room6;\n                          return m.id === ((_workflow$room6 = workflow.room) === null || _workflow$room6 === void 0 ? void 0 : _workflow$room6.frontModelId);\n                        })) === null || _models$find3 === void 0 ? void 0 : _models$find3.category\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 600,\n                        columnNumber: 70\n                      }, this)]\n                    }, void 0, true, {\n                      fileName: _jsxFileName,\n                      lineNumber: 600,\n                      columnNumber: 21\n                    }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n                      className: \"text-xs text-blue-600 mt-2\",\n                      children: \"All products inherit this room's styling\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 601,\n                      columnNumber: 21\n                    }, this)]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 597,\n                    columnNumber: 19\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 595,\n                  columnNumber: 17\n                }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"bg-white rounded-lg shadow p-6\",\n                  children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n                    className: \"text-lg font-semibold text-gray-900 mb-4\",\n                    children: \"Selected Products\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 606,\n                    columnNumber: 19\n                  }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                    className: \"space-y-2 text-sm\",\n                    children: [/*#__PURE__*/_jsxDEV(\"p\", {\n                      children: [/*#__PURE__*/_jsxDEV(\"span\", {\n                        className: \"text-gray-600\",\n                        children: \"Items:\"\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 608,\n                        columnNumber: 24\n                      }, this), \" \", /*#__PURE__*/_jsxDEV(\"span\", {\n                        className: \"font-medium\",\n                        children: workflow.products.length\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 608,\n                        columnNumber: 70\n                      }, this)]\n                    }, void 0, true, {\n                      fileName: _jsxFileName,\n                      lineNumber: 608,\n                      columnNumber: 21\n                    }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n                      children: [/*#__PURE__*/_jsxDEV(\"span\", {\n                        className: \"text-gray-600\",\n                        children: \"Total Value:\"\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 609,\n                        columnNumber: 24\n                      }, this), \" \", /*#__PURE__*/_jsxDEV(\"span\", {\n                        className: \"font-medium\",\n                        children: [\"$\", workflow.products.reduce((sum, item) => sum + item.totalPrice, 0).toFixed(2)]\n                      }, void 0, true, {\n                        fileName: _jsxFileName,\n                        lineNumber: 609,\n                        columnNumber: 76\n                      }, this)]\n                    }, void 0, true, {\n                      fileName: _jsxFileName,\n                      lineNumber: 609,\n                      columnNumber: 21\n                    }, this)]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 607,\n                    columnNumber: 19\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 605,\n                  columnNumber: 17\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 594,\n                columnNumber: 15\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 581,\n              columnNumber: 13\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"mt-6 flex justify-between\",\n              children: [/*#__PURE__*/_jsxDEV(\"button\", {\n                onClick: goToPreviousPhase,\n                className: \"bg-gray-600 hover:bg-gray-700 text-white px-4 py-2 rounded-md\",\n                children: \"\\u2190 Back to Room Setup\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 616,\n                columnNumber: 15\n              }, this), workflow.products.length > 0 && /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"flex space-x-3\",\n                children: [/*#__PURE__*/_jsxDEV(\"button\", {\n                  onClick: saveCurrentPhase,\n                  className: \"bg-blue-600 hover:bg-blue-700 text-white px-4 py-2 rounded-md\",\n                  children: \"Save Product Config\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 625,\n                  columnNumber: 19\n                }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n                  onClick: proceedToNextPhase,\n                  className: \"bg-green-600 hover:bg-green-700 text-white px-4 py-2 rounded-md\",\n                  children: \"Proceed to Quote \\u2192\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 631,\n                  columnNumber: 19\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 624,\n                columnNumber: 17\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 615,\n              columnNumber: 13\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 572,\n            columnNumber: 11\n          }, this), workflow.currentPhase === 'quote_finalize' && workflow.quote && /*#__PURE__*/_jsxDEV(\"div\", {\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"text-center mb-8\",\n              children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n                className: \"text-3xl font-bold text-gray-900 mb-2\",\n                children: \"Finalize Quote\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 647,\n                columnNumber: 15\n              }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n                className: \"text-gray-600\",\n                children: \"Review and configure final quote details\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 648,\n                columnNumber: 15\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 646,\n              columnNumber: 13\n            }, this), /*#__PURE__*/_jsxDEV(LiveProcessingProductManager, {\n              quote: workflow.quote,\n              rooms: workflow.quote.rooms,\n              products: products,\n              processings: processings,\n              processingRules: processingRules,\n              productDependencies: productDependencies,\n              onQuoteUpdate: handleQuoteUpdate\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 651,\n              columnNumber: 13\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 645,\n            columnNumber: 11\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 477,\n          columnNumber: 11\n        }, this), workflow.currentPhase === 'product_config' && /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"w-80 bg-white rounded-lg shadow-lg p-6 h-fit sticky top-8\",\n          children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n            className: \"text-lg font-semibold text-gray-900 mb-4 flex items-center\",\n            children: [/*#__PURE__*/_jsxDEV(\"svg\", {\n              className: \"w-5 h-5 mr-2 text-blue-600\",\n              fill: \"currentColor\",\n              viewBox: \"0 0 20 20\",\n              children: /*#__PURE__*/_jsxDEV(\"path\", {\n                fillRule: \"evenodd\",\n                d: \"M10 2L3 7v11a1 1 0 001 1h3v-8h6v8h3a1 1 0 001-1V7l-7-5z\",\n                clipRule: \"evenodd\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 669,\n                columnNumber: 19\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 668,\n              columnNumber: 17\n            }, this), \"Selected Products\"]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 667,\n            columnNumber: 15\n          }, this), workflow.products.length === 0 ? /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"text-center py-8 text-gray-500\",\n            children: [/*#__PURE__*/_jsxDEV(\"svg\", {\n              className: \"w-12 h-12 mx-auto mb-3 text-gray-300\",\n              fill: \"none\",\n              stroke: \"currentColor\",\n              viewBox: \"0 0 24 24\",\n              children: /*#__PURE__*/_jsxDEV(\"path\", {\n                strokeLinecap: \"round\",\n                strokeLinejoin: \"round\",\n                strokeWidth: \"2\",\n                d: \"M20 7l-8-4-8 4m16 0l-8 4m8-4v10l-8 4m0-10L4 7m8 4v10M4 7v10l8 4\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 677,\n                columnNumber: 21\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 676,\n              columnNumber: 19\n            }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n              className: \"text-sm\",\n              children: \"No products selected\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 679,\n              columnNumber: 19\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 675,\n            columnNumber: 17\n          }, this) : /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"space-y-3\",\n            children: [workflow.products.map((product, index) => {\n              const productDetails = products.find(p => p.id === product.productId);\n              return /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"bg-gray-50 rounded-lg p-3 border border-gray-200\",\n                children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"flex justify-between items-start mb-2\",\n                  children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                    className: \"flex-1\",\n                    children: [/*#__PURE__*/_jsxDEV(\"h4\", {\n                      className: \"text-sm font-medium text-gray-900\",\n                      children: productDetails === null || productDetails === void 0 ? void 0 : productDetails.name\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 689,\n                      columnNumber: 29\n                    }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n                      className: \"text-xs text-gray-600\",\n                      children: [\"$\", productDetails === null || productDetails === void 0 ? void 0 : productDetails.basePrice.toFixed(2), \" each\"]\n                    }, void 0, true, {\n                      fileName: _jsxFileName,\n                      lineNumber: 690,\n                      columnNumber: 29\n                    }, this)]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 688,\n                    columnNumber: 27\n                  }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n                    onClick: () => removeProduct(product.productId),\n                    className: \"text-red-600 hover:text-red-800 text-xs\",\n                    children: \"Remove\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 692,\n                    columnNumber: 27\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 687,\n                  columnNumber: 25\n                }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"flex items-center justify-between\",\n                  children: [/*#__PURE__*/_jsxDEV(\"span\", {\n                    className: \"text-xs text-gray-600\",\n                    children: \"Quantity:\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 702,\n                    columnNumber: 27\n                  }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                    className: \"flex items-center space-x-2\",\n                    children: [/*#__PURE__*/_jsxDEV(\"button\", {\n                      onClick: () => adjustProductQuantity(product.productId, -1),\n                      className: \"w-6 h-6 rounded-full bg-gray-200 hover:bg-gray-300 flex items-center justify-center text-gray-600 text-sm\",\n                      children: \"\\u2212\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 704,\n                      columnNumber: 29\n                    }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                      className: \"text-sm font-medium w-8 text-center\",\n                      children: product.quantity\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 710,\n                      columnNumber: 29\n                    }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n                      onClick: () => adjustProductQuantity(product.productId, 1),\n                      className: \"w-6 h-6 rounded-full bg-blue-600 hover:bg-blue-700 flex items-center justify-center text-white text-sm\",\n                      children: \"+\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 711,\n                      columnNumber: 29\n                    }, this)]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 703,\n                    columnNumber: 27\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 701,\n                  columnNumber: 25\n                }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"flex justify-between items-center mt-2 pt-2 border-t border-gray-200\",\n                  children: [/*#__PURE__*/_jsxDEV(\"span\", {\n                    className: \"text-xs text-gray-600\",\n                    children: \"Total:\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 722,\n                    columnNumber: 27\n                  }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                    className: \"text-sm font-semibold text-green-600\",\n                    children: [\"$\", (((productDetails === null || productDetails === void 0 ? void 0 : productDetails.basePrice) || 0) * product.quantity).toFixed(2)]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 723,\n                    columnNumber: 27\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 721,\n                  columnNumber: 25\n                }, this)]\n              }, product.productId, true, {\n                fileName: _jsxFileName,\n                lineNumber: 686,\n                columnNumber: 23\n              }, this);\n            }), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"border-t border-gray-200 pt-3 mt-4\",\n              children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"flex justify-between text-sm\",\n                children: [/*#__PURE__*/_jsxDEV(\"span\", {\n                  className: \"text-gray-600\",\n                  children: \"Total Items:\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 733,\n                  columnNumber: 23\n                }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                  className: \"font-medium\",\n                  children: workflow.products.length\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 734,\n                  columnNumber: 23\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 732,\n                columnNumber: 21\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"flex justify-between text-sm\",\n                children: [/*#__PURE__*/_jsxDEV(\"span\", {\n                  className: \"text-gray-600\",\n                  children: \"Est. Total:\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 737,\n                  columnNumber: 23\n                }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                  className: \"font-medium text-green-600\",\n                  children: [\"$\", workflow.products.reduce((sum, product) => {\n                    const productDetails = products.find(p => p.id === product.productId);\n                    return sum + ((productDetails === null || productDetails === void 0 ? void 0 : productDetails.basePrice) || 0) * product.quantity;\n                  }, 0).toFixed(2)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 738,\n                  columnNumber: 23\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 736,\n                columnNumber: 21\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 731,\n              columnNumber: 19\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 682,\n            columnNumber: 17\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 666,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 475,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"fixed bottom-0 left-0 right-0 bg-white border-t border-gray-200 shadow-lg z-50\",\n        children: /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8\",\n          children: /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"flex justify-between items-center py-4\",\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"flex items-center space-x-4\",\n              children: [/*#__PURE__*/_jsxDEV(\"span\", {\n                className: \"text-sm text-gray-600\",\n                children: [\"Phase \", ['customer_config', 'room_config', 'product_config', 'quote_finalize'].indexOf(workflow.currentPhase) + 1, \" of 4\"]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 757,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"w-32 bg-gray-200 rounded-full h-2\",\n                children: /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"bg-blue-600 h-2 rounded-full transition-all duration-300\",\n                  style: {\n                    width: `${(['customer_config', 'room_config', 'product_config', 'quote_finalize'].indexOf(workflow.currentPhase) + 1) / 4 * 100}%`\n                  }\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 761,\n                  columnNumber: 19\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 760,\n                columnNumber: 17\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 756,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"flex space-x-3\",\n              children: [/*#__PURE__*/_jsxDEV(\"button\", {\n                onClick: handleReturnToDashboard,\n                className: \"bg-gray-500 hover:bg-gray-600 text-white px-4 py-2 rounded-md text-sm flex items-center\",\n                children: \"\\uD83C\\uDFE0 Main\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 769,\n                columnNumber: 17\n              }, this), workflow.customer && /*#__PURE__*/_jsxDEV(\"button\", {\n                onClick: handleSaveQuote,\n                className: \"bg-orange-600 hover:bg-orange-700 text-white px-4 py-2 rounded-md text-sm flex items-center\",\n                children: \"\\uD83D\\uDCBE Save Draft\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 778,\n                columnNumber: 19\n              }, this), workflow.currentPhase !== 'customer_config' && /*#__PURE__*/_jsxDEV(\"button\", {\n                onClick: goToPreviousPhase,\n                className: \"bg-gray-600 hover:bg-gray-700 text-white px-4 py-2 rounded-md text-sm flex items-center\",\n                children: \"\\u2190 Back\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 787,\n                columnNumber: 19\n              }, this), canProceedToNextPhase() && workflow.currentPhase !== 'quote_finalize' && /*#__PURE__*/_jsxDEV(\"button\", {\n                onClick: proceedToNextPhase,\n                className: \"bg-blue-600 hover:bg-blue-700 text-white px-4 py-2 rounded-md text-sm flex items-center\",\n                children: \"Continue \\u2192\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 796,\n                columnNumber: 19\n              }, this), workflow.currentPhase === 'quote_finalize' && workflow.quote && /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"flex space-x-2\",\n                children: [/*#__PURE__*/_jsxDEV(\"button\", {\n                  onClick: handleSaveQuote,\n                  className: \"bg-green-600 hover:bg-green-700 text-white px-4 py-2 rounded-md text-sm\",\n                  children: \"Save & Return\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 806,\n                  columnNumber: 21\n                }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n                  onClick: printQuote,\n                  className: \"bg-purple-600 hover:bg-purple-700 text-white px-4 py-2 rounded-md text-sm\",\n                  children: \"Print\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 812,\n                  columnNumber: 21\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 805,\n                columnNumber: 19\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 768,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 755,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 754,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 753,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 474,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 425,\n    columnNumber: 5\n  }, this);\n}\n_s(ImprovedApp, \"5MWBuGulhTE3fzloyf2ceuAj27k=\");\n_c = ImprovedApp;\nexport default ImprovedApp;\nvar _c;\n$RefreshReg$(_c, \"ImprovedApp\");","map":{"version":3,"names":["React","useState","useEffect","customers","models","products","processings","processingRules","productDependencies","MinimalDashboard","CustomerSelector","EnhancedRoomManager","CleanProductCatalog","LiveProcessingProductManager","jsxDEV","_jsxDEV","ImprovedApp","_s","_workflow$customer","_workflow$room2","_models$find","_workflow$room4","_models$find2","_models$find3","currentView","setCurrentView","workflow","setWorkflow","currentPhase","customer","room","quote","savedStates","canProceedToNextPhase","length","proceedToNextPhase","phaseOrder","currentIndex","indexOf","nextPhase","createQuoteFromCurrentState","prev","getCurrentPhaseData","goToPreviousPhase","prevPhase","saveCurrentPhase","currentData","phaseNames","customer_config","room_config","product_config","quote_finalize","alert","newQuote","id","Date","now","toString","customerId","rooms","items","contractDiscount","customerDiscount","discountPercentage","orderDiscount","subtotal","totalDiscount","finalTotal","status","createdAt","expiresAt","requiresApproval","approvalThreshold","updatedQuote","recalculateQuote","reduce","sum","item","totalPrice","roomModel","find","m","_workflow$room","frontModelId","compatibleProducts","filter","product","p","productId","modelId","handleCustomerSelect","handleRoomCreate","handleProductAdd","quantity","inheritedProcessings","activatedProcessings","map","processingId","processing","applicableProductCategories","includes","category","calculatedPrice","pricingType","basePrice","price","dimensions","width","isInherited","appliedDate","toISOString","Boolean","processingTotal","ap","newItem","roomId","appliedProcessings","handleQuoteUpdate","removeProduct","adjustProductQuantity","change","newQuantity","printQuote","window","print","error","console","handleStartNewQuote","handleEditQuote","c","handleReturnToDashboard","handleSaveQuote","log","quoteToSave","quoteNumber","savedAt","existingQuotes","JSON","parse","localStorage","getItem","updatedQuotes","q","setItem","stringify","setTimeout","resetWorkflow","getCurrentRoomModel","phaseInfo","title","description","onStartNewQuote","onEditQuote","fileName","_jsxFileName","lineNumber","columnNumber","className","children","phase","index","isActive","isCompleted","contracts","onCustomerSelect","name","onClick","onCreateQuote","existingRooms","onAddRoom","_workflow$room3","selectedModel","onModelSelect","onProductSelect","hasQuote","_workflow$room5","_workflow$room6","toFixed","onQuoteUpdate","fill","viewBox","fillRule","d","clipRule","stroke","strokeLinecap","strokeLinejoin","strokeWidth","productDetails","style","_c","$RefreshReg$"],"sources":["/Users/dkjesuschua/Documents/demo_cpq/src/ImprovedApp.tsx"],"sourcesContent":["import React, { useState, useEffect } from 'react';\nimport { Quote, Customer, Room } from './types';\nimport { customers, models, products, processings, processingRules, productDependencies } from './data/sampleData';\nimport MinimalDashboard from './components/MinimalDashboard';\nimport CustomerSelector from './components/CustomerSelector';\nimport EnhancedRoomManager from './components/EnhancedRoomManager';\nimport CleanProductCatalog from './components/CleanProductCatalog';\nimport LiveProcessingProductManager from './components/LiveProcessingProductManager';\n\n// Define the 4 clear phases\ntype WorkflowPhase = 'customer_config' | 'room_config' | 'product_config' | 'quote_finalize';\ntype AppView = 'dashboard' | 'workflow';\n\ninterface WorkflowState {\n  currentPhase: WorkflowPhase;\n  customer: Customer | null;\n  room: Room | null;\n  products: Quote['items'];\n  quote: Quote | null;\n  savedStates: {\n    customer?: Customer;\n    room?: Room;\n    products?: Quote['items'];\n  };\n}\n\nfunction ImprovedApp() {\n  const [currentView, setCurrentView] = useState<AppView>('dashboard');\n  const [workflow, setWorkflow] = useState<WorkflowState>({\n    currentPhase: 'customer_config',\n    customer: null,\n    room: null,\n    products: [],\n    quote: null,\n    savedStates: {}\n  });\n\n  // Phase progression with validation\n  const canProceedToNextPhase = () => {\n    switch (workflow.currentPhase) {\n      case 'customer_config': return workflow.customer !== null;\n      case 'room_config': return workflow.room !== null;\n      case 'product_config': return workflow.products.length > 0;\n      case 'quote_finalize': return workflow.quote !== null;\n      default: return false;\n    }\n  };\n\n  const proceedToNextPhase = () => {\n    const phaseOrder: WorkflowPhase[] = ['customer_config', 'room_config', 'product_config', 'quote_finalize'];\n    const currentIndex = phaseOrder.indexOf(workflow.currentPhase);\n    \n    if (currentIndex < phaseOrder.length - 1 && canProceedToNextPhase()) {\n      const nextPhase = phaseOrder[currentIndex + 1];\n      \n      // Auto-create quote when moving to product config\n      if (nextPhase === 'product_config' && !workflow.quote) {\n        createQuoteFromCurrentState();\n      }\n      \n      // Update quote when moving to quote finalization\n      if (nextPhase === 'quote_finalize') {\n        createQuoteFromCurrentState();\n      }\n      \n      setWorkflow(prev => ({\n        ...prev,\n        currentPhase: nextPhase,\n        savedStates: {\n          ...prev.savedStates,\n          [prev.currentPhase]: getCurrentPhaseData()\n        }\n      }));\n    }\n  };\n\n  const goToPreviousPhase = () => {\n    const phaseOrder: WorkflowPhase[] = ['customer_config', 'room_config', 'product_config', 'quote_finalize'];\n    const currentIndex = phaseOrder.indexOf(workflow.currentPhase);\n    \n    if (currentIndex > 0) {\n      const prevPhase = phaseOrder[currentIndex - 1];\n      setWorkflow(prev => ({ ...prev, currentPhase: prevPhase }));\n    }\n  };\n\n  const getCurrentPhaseData = () => {\n    switch (workflow.currentPhase) {\n      case 'customer_config': return workflow.customer;\n      case 'room_config': return workflow.room;\n      case 'product_config': return workflow.products;\n      case 'quote_finalize': return workflow.quote;\n      default: return null;\n    }\n  };\n\n  // Save current phase state\n  const saveCurrentPhase = () => {\n    const currentData = getCurrentPhaseData();\n    setWorkflow(prev => ({\n      ...prev,\n      savedStates: {\n        ...prev.savedStates,\n        [prev.currentPhase]: currentData\n      }\n    }));\n    \n    // Show save confirmation\n    const phaseNames = {\n      customer_config: 'Customer Configuration',\n      room_config: 'Room Configuration', \n      product_config: 'Product Configuration',\n      quote_finalize: 'Quote'\n    };\n    alert(`${phaseNames[workflow.currentPhase]} saved successfully!`);\n  };\n\n  // Create quote from current state\n  const createQuoteFromCurrentState = () => {\n    if (!workflow.customer || !workflow.room) return;\n\n    const newQuote: Quote = {\n      id: Date.now().toString(),\n      customerId: workflow.customer.id,\n      rooms: [workflow.room],\n      items: workflow.products,\n      contractDiscount: 0,\n      customerDiscount: workflow.customer.discountPercentage || 0,\n      orderDiscount: 0,\n      subtotal: 0,\n      totalDiscount: 0,\n      finalTotal: 0,\n      status: 'draft',\n      createdAt: new Date(),\n      expiresAt: new Date(Date.now() + 30 * 24 * 60 * 60 * 1000),\n      requiresApproval: false,\n      approvalThreshold: 5000\n    };\n\n    const updatedQuote = recalculateQuote(newQuote);\n    setWorkflow(prev => ({ ...prev, quote: updatedQuote }));\n  };\n\n  // Recalculate quote totals\n  const recalculateQuote = (quote: Quote): Quote => {\n    const subtotal = quote.items.reduce((sum, item) => sum + item.totalPrice, 0);\n    const customerDiscount = subtotal * (quote.customerDiscount / 100);\n    const totalDiscount = customerDiscount + quote.orderDiscount;\n    const finalTotal = subtotal - totalDiscount;\n\n    return {\n      ...quote,\n      subtotal,\n      totalDiscount,\n      finalTotal,\n      requiresApproval: finalTotal > quote.approvalThreshold\n    };\n  };\n\n  // Cascading updates when stepping back\n  useEffect(() => {\n    // If customer changes, clear room and products\n    if (workflow.currentPhase === 'customer_config' && workflow.room) {\n      setWorkflow(prev => ({ ...prev, room: null, products: [], quote: null }));\n    }\n    \n    // If room changes, clear products that don't match the new room's model\n    if (workflow.currentPhase === 'room_config' && workflow.room && workflow.products.length > 0) {\n      const roomModel = models.find(m => m.id === workflow.room?.frontModelId);\n      if (roomModel) {\n        const compatibleProducts = workflow.products.filter(item => {\n          const product = products.find(p => p.id === item.productId);\n          return product?.modelId === roomModel.id;\n        });\n        \n        if (compatibleProducts.length !== workflow.products.length) {\n          setWorkflow(prev => ({ \n            ...prev, \n            products: compatibleProducts,\n            quote: null // Clear quote to force recalculation\n          }));\n        }\n      }\n    }\n  }, [workflow.customer, workflow.room, workflow.currentPhase, workflow.products]);\n\n  // Phase-specific handlers\n  const handleCustomerSelect = (customer: Customer) => {\n    setWorkflow(prev => ({ ...prev, customer }));\n  };\n\n  const handleRoomCreate = (room: Room) => {\n    setWorkflow(prev => ({ ...prev, room }));\n  };\n\n  const handleProductAdd = (productId: string, quantity: number = 1) => {\n    if (!workflow.room) return;\n\n    const product = products.find(p => p.id === productId);\n    if (!product) return;\n\n    // Apply room-level inherited processings\n    const inheritedProcessings = workflow.room.activatedProcessings\n      .map(processingId => {\n        const processing = processings.find(p => p.id === processingId);\n        if (!processing) return null;\n        \n        // Check if this processing is applicable to this product category\n        if (!processing.applicableProductCategories.includes(product.category)) {\n          return null;\n        }\n\n        // Calculate processing price\n        let calculatedPrice = 0;\n        if (processing.pricingType === 'percentage') {\n          calculatedPrice = product.basePrice * processing.price;\n        } else if (processing.pricingType === 'per_unit') {\n          calculatedPrice = processing.price;\n        } else if (processing.pricingType === 'per_dimension' && product.dimensions) {\n          // Simple calculation for per_dimension - could be enhanced with actual formula parsing\n          calculatedPrice = processing.price * (product.dimensions.width || 1);\n        }\n\n        return {\n          processingId,\n          calculatedPrice,\n          isInherited: true,\n          appliedDate: new Date().toISOString()\n        };\n      })\n      .filter(Boolean) as any[];\n\n    // Calculate total price with inherited processings\n    const processingTotal = inheritedProcessings.reduce((sum, ap) => sum + ap.calculatedPrice, 0);\n    const totalPrice = (product.basePrice + processingTotal) * quantity;\n\n    const newItem = {\n      id: Date.now().toString(),\n      productId,\n      roomId: workflow.room.id,\n      quantity,\n      appliedProcessings: inheritedProcessings,\n      basePrice: product.basePrice,\n      totalPrice\n    };\n\n    setWorkflow(prev => ({ \n      ...prev, \n      products: [...prev.products, newItem]\n    }));\n  };\n\n  const handleQuoteUpdate = (updatedQuote: Quote) => {\n    setWorkflow(prev => ({ ...prev, quote: updatedQuote }));\n  };\n\n  // Remove product from workflow\n  const removeProduct = (productId: string) => {\n    setWorkflow(prev => ({\n      ...prev,\n      products: prev.products.filter(item => item.productId !== productId)\n    }));\n  };\n\n  const adjustProductQuantity = (productId: string, change: number) => {\n    setWorkflow(prev => ({\n      ...prev,\n      products: prev.products.map(item => {\n        if (item.productId === productId) {\n          const newQuantity = item.quantity + change;\n          return { ...item, quantity: newQuantity };\n        }\n        return item;\n      }).filter(item => item.quantity > 0) // Remove items with 0 or negative quantity\n    }));\n  };\n\n  // Print quote\n  const printQuote = () => {\n    try {\n      window.print();\n    } catch (error) {\n      console.error('Print failed:', error);\n      alert('Print functionality is not available in this browser.');\n    }\n  };\n\n  // Dashboard handlers\n  const handleStartNewQuote = (customer: Customer) => {\n    setWorkflow({\n      currentPhase: 'room_config', // Skip customer selection, go directly to room\n      customer,\n      room: null,\n      products: [],\n      quote: null,\n      savedStates: {}\n    });\n    setCurrentView('workflow');\n  };\n\n  const handleEditQuote = (quote: Quote) => {\n    const customer = customers.find(c => c.id === quote.customerId);\n    if (customer && quote.rooms.length > 0) {\n      setWorkflow({\n        currentPhase: 'quote_finalize',\n        customer,\n        room: quote.rooms[0],\n        products: quote.items,\n        quote,\n        savedStates: {}\n      });\n      setCurrentView('workflow');\n    }\n  };\n\n  const handleReturnToDashboard = () => {\n    setCurrentView('dashboard');\n    // Reset workflow when returning to dashboard\n    setWorkflow({\n      currentPhase: 'customer_config',\n      customer: null,\n      room: null,\n      products: [],\n      quote: null,\n      savedStates: {}\n    });\n  };\n\n  const handleSaveQuote = () => {\n    console.log('handleSaveQuote called');\n    console.log('workflow.quote:', workflow.quote);\n    \n    if (workflow.quote) {\n      // Ensure quote has all required properties\n      const quoteToSave = {\n        ...workflow.quote,\n        id: workflow.quote.id || Date.now().toString(),\n        quoteNumber: workflow.quote.quoteNumber || `QUOTE-${Date.now()}`,\n        savedAt: new Date(),\n        status: workflow.quote.status || 'draft'\n      };\n      \n      console.log('Saving quote:', quoteToSave);\n      \n      // Save to localStorage\n      const existingQuotes = JSON.parse(localStorage.getItem('savedQuotes') || '[]');\n      const updatedQuotes = [...existingQuotes.filter((q: Quote) => q.id !== quoteToSave.id), quoteToSave];\n      localStorage.setItem('savedQuotes', JSON.stringify(updatedQuotes));\n      \n      console.log('Quotes after save:', updatedQuotes.length);\n      \n      alert('Quote saved successfully!');\n      handleReturnToDashboard();\n    } else {\n      console.log('No quote to save - workflow.quote is null');\n      // Try to create quote if it doesn't exist\n      if (workflow.customer && workflow.room && workflow.products.length > 0) {\n        console.log('Creating quote before saving...');\n        createQuoteFromCurrentState();\n        \n        // Retry save after creating quote\n        setTimeout(() => {\n          if (workflow.quote) {\n            handleSaveQuote();\n          } else {\n            alert('Error: Unable to create quote for saving');\n          }\n        }, 100);\n      } else {\n        alert('Error: Quote cannot be saved - missing required data');\n      }\n    }\n  };\n\n  const resetWorkflow = () => {\n    setWorkflow({\n      currentPhase: 'customer_config',\n      customer: null,\n      room: null,\n      products: [],\n      quote: null,\n      savedStates: {}\n    });\n  };\n\n  // Get the current room's model\n  const getCurrentRoomModel = () => {\n    if (!workflow.room) return null;\n    return models.find(m => m.id === workflow.room!.frontModelId) || null;\n  };\n\n  // Phase titles and descriptions\n  const phaseInfo = {\n    customer_config: {\n      title: 'Phase 1: Customer Configuration',\n      description: 'Select and configure customer details'\n    },\n    room_config: {\n      title: 'Phase 2: Room Configuration', \n      description: 'Create room and select styling preferences'\n    },\n    product_config: {\n      title: 'Phase 3: Product Configuration',\n      description: 'Select products that inherit room styling'\n    },\n    quote_finalize: {\n      title: 'Phase 4: Quote Finalization',\n      description: 'Review, adjust discounts, and finalize quote'\n    }\n  };\n\n  // Dashboard view\n  if (currentView === 'dashboard') {\n    return (\n      <MinimalDashboard\n        customers={customers}\n        onStartNewQuote={handleStartNewQuote}\n        onEditQuote={handleEditQuote}\n      />\n    );\n  }\n\n  // Workflow view\n  return (\n    <div className=\"min-h-screen bg-gray-50 pb-20\">\n      {/* Header with Phase Progression */}\n      <header className=\"bg-white shadow-sm border-b border-gray-200\">\n        <div className=\"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8\">\n          <div className=\"flex justify-between items-center h-16\">\n            <div className=\"flex items-center\">\n              <h1 className=\"text-2xl font-bold text-gray-900\">Kitchen CPQ</h1>\n              <span className=\"ml-4 text-sm text-gray-500\">Improved Workflow</span>\n            </div>\n            \n            {/* Phase Progress Indicator */}\n            <div className=\"flex items-center space-x-2\">\n              {(['customer_config', 'room_config', 'product_config', 'quote_finalize'] as WorkflowPhase[]).map((phase, index) => {\n                const phaseNames = ['Customer', 'Room', 'Products', 'Quote'];\n                const isActive = workflow.currentPhase === phase;\n                const isCompleted = (['customer_config', 'room_config', 'product_config', 'quote_finalize'] as WorkflowPhase[]).indexOf(workflow.currentPhase) > index;\n                \n                return (\n                  <div key={phase} className=\"flex items-center\">\n                    <div className={`w-8 h-8 rounded-full flex items-center justify-center text-sm font-medium ${\n                      isActive ? 'bg-blue-600 text-white' :\n                      isCompleted ? 'bg-green-600 text-white' :\n                      'bg-gray-300 text-gray-600'\n                    }`}>\n                      {index + 1}\n                    </div>\n                    <span className={`ml-2 text-sm ${isActive ? 'text-blue-600 font-medium' : 'text-gray-500'}`}>\n                      {phaseNames[index]}\n                    </span>\n                    {index < 3 && <div className=\"w-8 h-0.5 bg-gray-300 mx-3\" />}\n                  </div>\n                );\n              })}\n            </div>\n\n            {/* Current Phase Info */}\n            <div className=\"text-right\">\n              <div className=\"text-sm font-medium text-gray-900\">\n                {phaseInfo[workflow.currentPhase].title}\n              </div>\n              <div className=\"text-xs text-gray-500\">\n                {phaseInfo[workflow.currentPhase].description}\n              </div>\n            </div>\n          </div>\n        </div>\n      </header>\n\n      {/* Main Content with Sidebar Layout */}\n      <main className=\"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8\">\n        <div className=\"flex gap-6\">\n          {/* Main Content Area */}\n          <div className=\"flex-1\">\n        \n        {/* Phase 1: Customer Configuration */}\n        {workflow.currentPhase === 'customer_config' && (\n          <div className=\"max-w-4xl mx-auto\">\n            <div className=\"text-center mb-8\">\n              <h2 className=\"text-3xl font-bold text-gray-900 mb-2\">Select Customer</h2>\n              <p className=\"text-gray-600\">Select customer to start quote process</p>\n            </div>\n            \n            <CustomerSelector\n              customers={customers}\n              contracts={[]}\n              onCustomerSelect={handleCustomerSelect}\n            />\n\n            {workflow.customer && (\n              <div className=\"mt-6 bg-green-50 border border-green-200 rounded-lg p-4\">\n                <div className=\"flex items-center justify-between\">\n                  <div>\n                    <h3 className=\"text-lg font-medium text-green-900\">\n                      Customer Selected: {workflow.customer.name}\n                    </h3>\n                    <p className=\"text-sm text-green-700\">\n                      Customer Discount: {workflow.customer.discountPercentage}%\n                    </p>\n                  </div>\n                  <div className=\"flex space-x-3\">\n                    <button\n                      onClick={saveCurrentPhase}\n                      className=\"bg-blue-600 hover:bg-blue-700 text-white px-4 py-2 rounded-md text-sm\"\n                    >\n                      Save Customer\n                    </button>\n                    <button\n                      onClick={proceedToNextPhase}\n                      className=\"bg-green-600 hover:bg-green-700 text-white px-4 py-2 rounded-md text-sm\"\n                    >\n                      Proceed to Room Setup \n                    </button>\n                  </div>\n                </div>\n              </div>\n            )}\n          </div>\n        )}\n\n        {/* Phase 2: Room Configuration */}\n        {workflow.currentPhase === 'room_config' && (\n          <div className=\"max-w-4xl mx-auto\">\n            <div className=\"text-center mb-8\">\n              <h2 className=\"text-3xl font-bold text-gray-900 mb-2\">Configure Room</h2>\n              <p className=\"text-gray-600\">\n                Customer: <span className=\"font-medium\">{workflow.customer?.name}</span>\n              </p>\n            </div>\n\n            <EnhancedRoomManager\n              models={models}\n              processings={processings}\n              onCreateQuote={handleRoomCreate}\n              existingRooms={workflow.room ? [workflow.room] : []}\n              onAddRoom={handleRoomCreate}\n            />\n\n            <div className=\"mt-6 flex justify-between\">\n              <button\n                onClick={goToPreviousPhase}\n                className=\"bg-gray-600 hover:bg-gray-700 text-white px-4 py-2 rounded-md\"\n              >\n                 Back to Customer\n              </button>\n\n              {workflow.room && (\n                <div className=\"flex space-x-3\">\n                  <button\n                    onClick={saveCurrentPhase}\n                    className=\"bg-blue-600 hover:bg-blue-700 text-white px-4 py-2 rounded-md\"\n                  >\n                    Save Room Config\n                  </button>\n                  <button\n                    onClick={proceedToNextPhase}\n                    className=\"bg-green-600 hover:bg-green-700 text-white px-4 py-2 rounded-md\"\n                  >\n                    Proceed to Products \n                  </button>\n                </div>\n              )}\n            </div>\n          </div>\n        )}\n\n        {/* Phase 3: Product Configuration */}\n        {workflow.currentPhase === 'product_config' && workflow.room && (\n          <div>\n            <div className=\"text-center mb-8\">\n              <h2 className=\"text-3xl font-bold text-gray-900 mb-2\">Configure Products</h2>\n              <p className=\"text-gray-600\">\n                Room: <span className=\"font-medium\">{workflow.room?.name}</span> | \n                Front Model: <span className=\"font-medium\">{models.find(m => m.id === workflow.room?.frontModelId)?.name}</span>\n              </p>\n            </div>\n\n            <div className=\"grid grid-cols-1 lg:grid-cols-3 gap-6\">\n              <div className=\"lg:col-span-2\">\n                <CleanProductCatalog\n                  models={models} // Pass all models\n                  products={products}\n                  selectedModel={getCurrentRoomModel()}\n                  onModelSelect={() => {}} // Disabled in improved workflow\n                  onProductSelect={(product, quantity) => handleProductAdd(product.id, quantity)}\n                  hasQuote={true}\n                  onCreateQuote={() => {}}\n                />\n              </div>\n              \n              <div className=\"space-y-6\">\n                <div className=\"bg-white rounded-lg shadow p-6\">\n                  <h3 className=\"text-lg font-semibold text-gray-900 mb-4\">Room Configuration</h3>\n                  <div className=\"space-y-2 text-sm\">\n                    <p><span className=\"text-gray-600\">Room:</span> <span className=\"font-medium\">{workflow.room?.name}</span></p>\n                    <p><span className=\"text-gray-600\">Front Model:</span> <span className=\"font-medium\">{models.find(m => m.id === workflow.room?.frontModelId)?.name}</span></p>\n                    <p><span className=\"text-gray-600\">Style:</span> <span className=\"font-medium capitalize\">{models.find(m => m.id === workflow.room?.frontModelId)?.category}</span></p>\n                    <p className=\"text-xs text-blue-600 mt-2\">All products inherit this room's styling</p>\n                  </div>\n                </div>\n\n                <div className=\"bg-white rounded-lg shadow p-6\">\n                  <h3 className=\"text-lg font-semibold text-gray-900 mb-4\">Selected Products</h3>\n                  <div className=\"space-y-2 text-sm\">\n                    <p><span className=\"text-gray-600\">Items:</span> <span className=\"font-medium\">{workflow.products.length}</span></p>\n                    <p><span className=\"text-gray-600\">Total Value:</span> <span className=\"font-medium\">${workflow.products.reduce((sum, item) => sum + item.totalPrice, 0).toFixed(2)}</span></p>\n                  </div>\n                </div>\n              </div>\n            </div>\n\n            <div className=\"mt-6 flex justify-between\">\n              <button\n                onClick={goToPreviousPhase}\n                className=\"bg-gray-600 hover:bg-gray-700 text-white px-4 py-2 rounded-md\"\n              >\n                 Back to Room Setup\n              </button>\n\n              {workflow.products.length > 0 && (\n                <div className=\"flex space-x-3\">\n                  <button\n                    onClick={saveCurrentPhase}\n                    className=\"bg-blue-600 hover:bg-blue-700 text-white px-4 py-2 rounded-md\"\n                  >\n                    Save Product Config\n                  </button>\n                  <button\n                    onClick={proceedToNextPhase}\n                    className=\"bg-green-600 hover:bg-green-700 text-white px-4 py-2 rounded-md\"\n                  >\n                    Proceed to Quote \n                  </button>\n                </div>\n              )}\n            </div>\n          </div>\n        )}\n\n        {/* Phase 4: Quote Finalization */}\n        {workflow.currentPhase === 'quote_finalize' && workflow.quote && (\n          <div>\n            <div className=\"text-center mb-8\">\n              <h2 className=\"text-3xl font-bold text-gray-900 mb-2\">Finalize Quote</h2>\n              <p className=\"text-gray-600\">Review and configure final quote details</p>\n            </div>\n\n            <LiveProcessingProductManager\n              quote={workflow.quote}\n              rooms={workflow.quote.rooms}\n              products={products}\n              processings={processings}\n              processingRules={processingRules}\n              productDependencies={productDependencies}\n              onQuoteUpdate={handleQuoteUpdate}\n            />\n          </div>\n        )}\n          </div>\n\n          {/* Selected Products Sidebar - Only for product_config phase */}\n          {workflow.currentPhase === 'product_config' && (\n            <div className=\"w-80 bg-white rounded-lg shadow-lg p-6 h-fit sticky top-8\">\n              <h3 className=\"text-lg font-semibold text-gray-900 mb-4 flex items-center\">\n                <svg className=\"w-5 h-5 mr-2 text-blue-600\" fill=\"currentColor\" viewBox=\"0 0 20 20\">\n                  <path fillRule=\"evenodd\" d=\"M10 2L3 7v11a1 1 0 001 1h3v-8h6v8h3a1 1 0 001-1V7l-7-5z\" clipRule=\"evenodd\" />\n                </svg>\n                Selected Products\n              </h3>\n              \n              {workflow.products.length === 0 ? (\n                <div className=\"text-center py-8 text-gray-500\">\n                  <svg className=\"w-12 h-12 mx-auto mb-3 text-gray-300\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n                    <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth=\"2\" d=\"M20 7l-8-4-8 4m16 0l-8 4m8-4v10l-8 4m0-10L4 7m8 4v10M4 7v10l8 4\" />\n                  </svg>\n                  <p className=\"text-sm\">No products selected</p>\n                </div>\n              ) : (\n                <div className=\"space-y-3\">\n                  {workflow.products.map((product, index) => {\n                    const productDetails = products.find(p => p.id === product.productId);\n                    return (\n                      <div key={product.productId} className=\"bg-gray-50 rounded-lg p-3 border border-gray-200\">\n                        <div className=\"flex justify-between items-start mb-2\">\n                          <div className=\"flex-1\">\n                            <h4 className=\"text-sm font-medium text-gray-900\">{productDetails?.name}</h4>\n                            <p className=\"text-xs text-gray-600\">${productDetails?.basePrice.toFixed(2)} each</p>\n                          </div>\n                          <button\n                            onClick={() => removeProduct(product.productId)}\n                            className=\"text-red-600 hover:text-red-800 text-xs\"\n                          >\n                            Remove\n                          </button>\n                        </div>\n                        \n                        {/* Quantity Controls */}\n                        <div className=\"flex items-center justify-between\">\n                          <span className=\"text-xs text-gray-600\">Quantity:</span>\n                          <div className=\"flex items-center space-x-2\">\n                            <button\n                              onClick={() => adjustProductQuantity(product.productId, -1)}\n                              className=\"w-6 h-6 rounded-full bg-gray-200 hover:bg-gray-300 flex items-center justify-center text-gray-600 text-sm\"\n                            >\n                              \n                            </button>\n                            <span className=\"text-sm font-medium w-8 text-center\">{product.quantity}</span>\n                            <button\n                              onClick={() => adjustProductQuantity(product.productId, 1)}\n                              className=\"w-6 h-6 rounded-full bg-blue-600 hover:bg-blue-700 flex items-center justify-center text-white text-sm\"\n                            >\n                              +\n                            </button>\n                          </div>\n                        </div>\n                        \n                        {/* Total for this product */}\n                        <div className=\"flex justify-between items-center mt-2 pt-2 border-t border-gray-200\">\n                          <span className=\"text-xs text-gray-600\">Total:</span>\n                          <span className=\"text-sm font-semibold text-green-600\">\n                            ${((productDetails?.basePrice || 0) * product.quantity).toFixed(2)}\n                          </span>\n                        </div>\n                      </div>\n                    );\n                  })}\n                  \n                  <div className=\"border-t border-gray-200 pt-3 mt-4\">\n                    <div className=\"flex justify-between text-sm\">\n                      <span className=\"text-gray-600\">Total Items:</span>\n                      <span className=\"font-medium\">{workflow.products.length}</span>\n                    </div>\n                    <div className=\"flex justify-between text-sm\">\n                      <span className=\"text-gray-600\">Est. Total:</span>\n                      <span className=\"font-medium text-green-600\">\n                        ${workflow.products.reduce((sum, product) => {\n                          const productDetails = products.find(p => p.id === product.productId);\n                          return sum + (productDetails?.basePrice || 0) * product.quantity;\n                        }, 0).toFixed(2)}\n                      </span>\n                    </div>\n                  </div>\n                </div>\n              )}\n            </div>\n          )}\n        </div>\n\n        {/* Sticky Navigation Bar */}\n        <div className=\"fixed bottom-0 left-0 right-0 bg-white border-t border-gray-200 shadow-lg z-50\">\n          <div className=\"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8\">\n            <div className=\"flex justify-between items-center py-4\">\n              <div className=\"flex items-center space-x-4\">\n                <span className=\"text-sm text-gray-600\">\n                  Phase {(['customer_config', 'room_config', 'product_config', 'quote_finalize'] as WorkflowPhase[]).indexOf(workflow.currentPhase) + 1} of 4\n                </span>\n                <div className=\"w-32 bg-gray-200 rounded-full h-2\">\n                  <div \n                    className=\"bg-blue-600 h-2 rounded-full transition-all duration-300\"\n                    style={{ width: `${(((['customer_config', 'room_config', 'product_config', 'quote_finalize'] as WorkflowPhase[]).indexOf(workflow.currentPhase) + 1) / 4) * 100}%` }}\n                  ></div>\n                </div>\n              </div>\n\n              <div className=\"flex space-x-3\">\n                <button\n                  onClick={handleReturnToDashboard}\n                  className=\"bg-gray-500 hover:bg-gray-600 text-white px-4 py-2 rounded-md text-sm flex items-center\"\n                >\n                   Main\n                </button>\n\n                {/* Save Draft - available from any phase with customer selected */}\n                {workflow.customer && (\n                  <button\n                    onClick={handleSaveQuote}\n                    className=\"bg-orange-600 hover:bg-orange-700 text-white px-4 py-2 rounded-md text-sm flex items-center\"\n                  >\n                     Save Draft\n                  </button>\n                )}\n\n                {workflow.currentPhase !== 'customer_config' && (\n                  <button\n                    onClick={goToPreviousPhase}\n                    className=\"bg-gray-600 hover:bg-gray-700 text-white px-4 py-2 rounded-md text-sm flex items-center\"\n                  >\n                     Back\n                  </button>\n                )}\n                \n                {canProceedToNextPhase() && workflow.currentPhase !== 'quote_finalize' && (\n                  <button\n                    onClick={proceedToNextPhase}\n                    className=\"bg-blue-600 hover:bg-blue-700 text-white px-4 py-2 rounded-md text-sm flex items-center\"\n                  >\n                    Continue \n                  </button>\n                )}\n\n                {workflow.currentPhase === 'quote_finalize' && workflow.quote && (\n                  <div className=\"flex space-x-2\">\n                    <button\n                      onClick={handleSaveQuote}\n                      className=\"bg-green-600 hover:bg-green-700 text-white px-4 py-2 rounded-md text-sm\"\n                    >\n                      Save & Return\n                    </button>\n                    <button\n                      onClick={printQuote}\n                      className=\"bg-purple-600 hover:bg-purple-700 text-white px-4 py-2 rounded-md text-sm\"\n                    >\n                      Print\n                    </button>\n                  </div>\n                )}\n              </div>\n            </div>\n          </div>\n        </div>\n      </main>\n    </div>\n  );\n}\n\nexport default ImprovedApp;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}